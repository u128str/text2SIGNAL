import requests
#
# Class coped and modified  from https://github.com/signavio/bpmn2constraints/blob/main/tutorial/SignavioAuthenticator.py
class SignavioAuthenticatorCoE:
    def __init__(self, system_instance, tenant_id, email, pw):
        self.system_instance = system_instance
        self.tenant_id = tenant_id
        self.email = email
        self.pw = pw

    """
    Takes care of authentication against Signavio systems
    """

    def authenticate(self):
        """
        Authenticates user at Signavio system instance and initiates session.
        Returns:
            dictionary: Session information
        """
        login_url = self.system_instance + "/p/login"
        data = {"name": self.email, "password": self.pw, "tokenonly": "true"}
        #if "tenant_id" in locals():
        #    data["tenant"] = self.tenant_id
        data["tenant"] = self.tenant_id
        # authenticate
        login_request = requests.post(login_url, data)

        # retrieve token and session ID
        auth_token = login_request.content.decode("utf-8")
        jsesssion_ID = login_request.cookies["JSESSIONID"]

        # The cookie is named 'LBROUTEID' for base_url 'editor.signavio.com'
        # and 'editor.signavio.com', and 'AWSELB' for base_url
        # 'app-au.signavio.com' and 'app-us.signavio.com'
        lb_route_ID = login_request.cookies["LBROUTEID"]

        # return credentials
        return {
            "jsesssion_ID": jsesssion_ID,
            "lb_route_ID": lb_route_ID,
            "auth_token": auth_token,
        }
        
def credentials_actualization(system_instance, workspace_id, user_name, pw, auth={}, workspace_name="Process AI"):
    # get credentials for current session. They are valid for 24 hours 
    authenticator = SignavioAuthenticatorCoE(system_instance, workspace_id, user_name, pw)
    auth_data = authenticator.authenticate()
    cookies = {'JSESSIONID': auth_data['jsesssion_ID'], 'LBROUTEID': auth_data['lb_route_ID']}
    headers = {'Accept': 'application/json', 'x-signavio-id':  auth_data['auth_token']}
    print(auth_data['jsesssion_ID'],auth_data['lb_route_ID'])
    print(auth_data['auth_token'])
    auth[workspace_name]={"cookies":cookies,"headers":headers}
    return auth

#system_instance = 'https://editor.signavio.com'
#workspace_id = 'b0f07deabd3140aea5344baa686e0d84' # workspace Process AI 
#workspace_name="Process AI"
def POST_Signavio(query={},workspace_name="Process AI",auth={}, system_instance='https://editor.signavio.com', suffix='/g/api/pi-graphql/graphql'):
         # https://editor.signavio.com/g/api/graphql
        signal_endpoint = system_instance + suffix
        timeout=50
        try:
            query_request = requests.post(
                signal_endpoint,
                cookies=auth[workspace_name]["cookies"],
                headers=auth[workspace_name]["headers"],
                timeout=timeout,
                json=query)
            query_request.raise_for_status()
        except requests.HTTPError as ex:
            # possibly check response for a message
            #raise ex  # let the caller handle it
            return({"requests.HTTPError":ex})
            #raise ex  # let the caller handle it

        except requests.Timeout:
            print("request took too long")
        
        return query_request.json()


# list of process
# POST_Signavio(query=q_list_processes,workspace_name=workspace_name)['data']['subjects']
q_list_processes={
    "operationName": "Subjects",
    "variables": {},
    "query": "query Subjects {\n  subjects {\n    id\n    name\n    businessArea\n  investigationCount dashboardCount }}"
}

# list of columns - schema
q_list_columns={
    "operationName": "subjectView",
    "variables": {
        "id": "defaultview-2",
        "subjectId": "test00-11"
    },
    "query": "query subjectView($id: ID!, $subjectId: ID!) {\n  subjectView(id: $id, subjectId: $subjectId) {\n    ...SubjectView\n    __typename\n  }\n}\n\nfragment SubjectView on SubjectView {\n  id\n  name\n  isDefaultView\n  isAccessView\n  columns {\n    ...SubjectViewColumn\n    __typename\n  }\n  users {\n    ...SubjectViewUser\n    __typename\n  }\n  __typename\n}\n\nfragment SubjectViewColumn on SubjectViewColumn {\n  name\n  isVisible\n  dataType\n  processVariableId\n  filter {\n    ... on SubjectViewColumnDateTimeFilter {\n      startDate\n      endDate\n      type\n      processVariableId\n      __typename\n    }\n    ... on SubjectViewColumnChoiceFilter {\n      includes\n      excludes\n      type\n      processVariableId\n      __typename\n    }\n    ... on SubjectViewColumnNumberFilter {\n      min\n      max\n      type\n      processVariableId\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment SubjectViewUser on SubjectViewUser {\n  id\n  role\n  entity {\n    ...UserOrGroup\n    __typename\n  }\n  __typename\n}\n\nfragment UserOrGroup on UserOrGroup {\n  ... on User {\n    ...User\n    __typename\n  }\n  ... on UserGroup {\n    ...UserGroup\n    __typename\n  }\n  ... on Everyone {\n    ...Everyone\n    __typename\n  }\n  __typename\n}\n\nfragment Everyone on Everyone {\n  type\n  __typename\n}\n\nfragment User on User {\n  id\n  firstName\n  lastName\n  name\n  email\n  type\n  __typename\n}\n\nfragment UserGroup on UserGroup {\n  id\n  name\n  type\n  __typename\n}\n"
}

# delete
query_to_api_signal_delete={
    "operationName": "DeleteWidget",
    "variables": {
        "id": "rr1-1"
    },
    "query": "mutation DeleteWidget($id: ID!) {\n  deleteWidget(id: $id) {\n    widgetId\n    parentId\n    __typename\n  }\n}\n"
}

query_to_api_signal= {
    "operationName": "CreateWidgetOnInvestigation",
    "variables": {
        "id": "qq-1",
        "widget": {
            "visualization": {
                "unit":  None,
                "type": "VALUE"
            },
            "dataSource": {
                "query": "SELECT count(case_id) FROM THIS_PROCESS",
                "type": "SIGNAL"
            },
            "name": "rr1"
        }
    },
    "query": "mutation CreateWidgetOnInvestigation($id: ID!, $widget: JSON!) {\n  createWidget(id: $id, widget: $widget) {\n    ...Widget\n    __typename\n  }\n}\n\nfragment Widget on Widget {\n  id\n  name\n  description\n  children\n  filters {\n    ...Filter\n    __typename\n  }\n  visualization {\n    ...Visualization\n    __typename\n  }\n  dataSource {\n    ...WidgetDataSource\n    __typename\n  }\n  __typename\n}\n\nfragment Filter on Filter {\n  ... on ActivityOccurrencesFilter {\n    ...ActivityOccurrencesFilter\n    __typename\n  }\n  ... on CustomSignalFilter {\n    ...CustomSignalFilter\n    __typename\n  }\n  ... on BehaviorFilter {\n    ...BehaviorFilter\n    __typename\n  }\n  ... on CaseCycleTimeFilter {\n    ...CaseCycleTimeFilter\n    __typename\n  }\n  ... on CaseDateFilter {\n    ...CaseDateFilter\n    __typename\n  }\n  ... on EventDateFilter {\n    ...EventDateFilter\n    __typename\n  }\n  ... on CaseDateRollingFilter {\n    ...CaseDateRollingFilter\n    __typename\n  }\n  ... on CaseEventCountFilter {\n    ...CaseEventCountFilter\n    __typename\n  }\n  ... on CaseIdFilter {\n    ...CaseIdFilter\n    __typename\n  }\n  ... on ProcessDiscoveryFilter {\n    ...ProcessDiscoveryFilter\n    __typename\n  }\n  ... on ProcessModelFilter {\n    ...ProcessModelFilter\n    __typename\n  }\n  ... on ProcessVarChoiceFilter {\n    ...ProcessVarChoiceFilter\n    __typename\n  }\n  ... on ProcessVarCurrencyFilter {\n    ...ProcessVarCurrencyFilter\n    __typename\n  }\n  ... on ProcessVarDateTimeFilter {\n    ...ProcessVarDateTimeFilter\n    __typename\n  }\n  ... on ProcessVarDoublePrecisionFilter {\n    ...ProcessVarDoublePrecisionFilter\n    __typename\n  }\n  ... on ProcessVarDurationFilter {\n    ...ProcessVarDurationFilter\n    __typename\n  }\n  __typename\n}\n\nfragment ActivityOccurrencesFilter on ActivityOccurrencesFilter {\n  id\n  type\n  includes\n  excludes\n  enabled\n  level\n  __typename\n}\n\nfragment CustomSignalFilter on CustomSignalFilter {\n  id\n  type\n  name\n  description\n  signalFragment\n  enabled\n  level\n  __typename\n}\n\nfragment BehaviorFilter on BehaviorFilter {\n  id\n  type\n  behaviorType\n  startEndType\n  startEndEvents\n  sequenceType\n  sequenceSource\n  sequenceTarget\n  reworkType\n  reworkOperator\n  reworkFrequency\n  enabled\n  __typename\n}\n\nfragment CaseCycleTimeFilter on CaseCycleTimeFilter {\n  id\n  type\n  maximum {\n    value\n    unit\n    operator\n    __typename\n  }\n  minimum {\n    value\n    unit\n    operator\n    __typename\n  }\n  enabled\n  __typename\n}\n\nfragment CaseDateFilter on CaseDateFilter {\n  type\n  startDate\n  endDate\n  id\n  caseInclusionCriterion\n  enabled\n  __typename\n}\n\nfragment EventDateFilter on EventDateFilter {\n  id\n  type\n  startDate\n  endDate\n  enabled\n  __typename\n}\n\nfragment CaseDateRollingFilter on CaseDateRollingFilter {\n  id\n  type\n  unit\n  amount\n  caseInclusionCriterion\n  enabled\n  __typename\n}\n\nfragment CaseEventCountFilter on CaseEventCountFilter {\n  id\n  type\n  minimum {\n    value\n    operator\n    __typename\n  }\n  maximum {\n    value\n    operator\n    __typename\n  }\n  enabled\n  __typename\n}\n\nfragment CaseIdFilter on CaseIdFilter {\n  id\n  type\n  includes\n  excludes\n  enabled\n  __typename\n}\n\nfragment ProcessDiscoveryFilter on ProcessDiscoveryFilter {\n  id\n  type\n  dataSource\n  variantsAsEventNames\n  aggregationDimension\n  order\n  enabled\n  __typename\n}\n\nfragment ProcessModelFilter on ProcessModelFilter {\n  id\n  type\n  dataSource\n  variantsAsEventNames\n  aggregationDimension\n  order\n  enabled\n  __typename\n}\n\nfragment ProcessVarChoiceFilter on ProcessVarChoiceFilter {\n  id\n  type\n  processVariable\n  includes\n  excludes\n  enabled\n  parameter {\n    ... on ProcessVariableParameter {\n      type\n      name\n      __typename\n    }\n    ... on CustomAttributeParameter {\n      type\n      customAttributeId\n      __typename\n    }\n    __typename\n  }\n  level\n  __typename\n}\n\nfragment ProcessVarCurrencyFilter on ProcessVarCurrencyFilter {\n  id\n  type\n  processVariable\n  minimum {\n    value\n    operator\n    __typename\n  }\n  maximum {\n    value\n    operator\n    __typename\n  }\n  enabled\n  parameter {\n    ... on ProcessVariableParameter {\n      type\n      name\n      __typename\n    }\n    ... on CustomAttributeParameter {\n      type\n      customAttributeId\n      __typename\n    }\n    __typename\n  }\n  level\n  __typename\n}\n\nfragment ProcessVarDateTimeFilter on ProcessVarDateTimeFilter {\n  startDate\n  type\n  endDate\n  id\n  processVariable\n  enabled\n  parameter {\n    ... on ProcessVariableParameter {\n      type\n      name\n      __typename\n    }\n    ... on CustomAttributeParameter {\n      type\n      customAttributeId\n      __typename\n    }\n    __typename\n  }\n  level\n  __typename\n}\n\nfragment ProcessVarDoublePrecisionFilter on ProcessVarDoublePrecisionFilter {\n  id\n  type\n  processVariable\n  minimum {\n    value\n    operator\n    __typename\n  }\n  maximum {\n    value\n    operator\n    __typename\n  }\n  enabled\n  parameter {\n    ... on ProcessVariableParameter {\n      type\n      name\n      __typename\n    }\n    ... on CustomAttributeParameter {\n      type\n      customAttributeId\n      __typename\n    }\n    __typename\n  }\n  level\n  __typename\n}\n\nfragment ProcessVarDurationFilter on ProcessVarDurationFilter {\n  id\n  type\n  processVariable\n  minimum {\n    value\n    unit\n    operator\n    __typename\n  }\n  maximum {\n    value\n    unit\n    operator\n    __typename\n  }\n  enabled\n  parameter {\n    ... on ProcessVariableParameter {\n      type\n      name\n      __typename\n    }\n    ... on CustomAttributeParameter {\n      type\n      customAttributeId\n      __typename\n    }\n    __typename\n  }\n  level\n  __typename\n}\n\nfragment Visualization on Visualization {\n  ... on ActivityList {\n    type\n    __typename\n  }\n  ... on Area {\n    type\n    thresholds {\n      ...Threshold\n      __typename\n    }\n    dataLabel {\n      ...DataLabel\n      __typename\n    }\n    colorPalette {\n      ...ColorPalette\n      __typename\n    }\n    __typename\n  }\n  ... on BarChart {\n    type\n    orientation\n    grouping\n    thresholds {\n      ...Threshold\n      __typename\n    }\n    dataLabel {\n      ...DataLabel\n      __typename\n    }\n    colorPalette {\n      ...ColorPalette\n      __typename\n    }\n    __typename\n  }\n  ... on CasesTable {\n    type\n    columnConfigurations {\n      ...ColumnConfiguration\n      __typename\n    }\n    __typename\n  }\n  ... on Chapter {\n    type\n    __typename\n  }\n  ... on FuzzyModel {\n    type\n    edgeGranularity\n    nodeGranularity\n    annotateBy\n    width\n    __typename\n  }\n  ... on DualAxisChart {\n    type\n    orientation\n    dataLabel {\n      ...DataLabel\n      __typename\n    }\n    colorPalette {\n      ...ColorPalette\n      __typename\n    }\n    __typename\n  }\n  ... on HeatMap {\n    type\n    dataLabel {\n      ...DataLabel\n      __typename\n    }\n    colorPalette {\n      ...ColorPalette\n      __typename\n    }\n    __typename\n  }\n  ... on Histogram {\n    type\n    thresholds {\n      ...Threshold\n      __typename\n    }\n    unit {\n      ...Unit\n      __typename\n    }\n    isAverageShown\n    percentilesShown\n    dataLabel {\n      ...DataLabel\n      __typename\n    }\n    colorPalette {\n      ...ColorPalette\n      __typename\n    }\n    __typename\n  }\n  ... on PieChart {\n    type\n    dataLabel {\n      ...DataLabel\n      __typename\n    }\n    colorPalette {\n      ...ColorPalette\n      __typename\n    }\n    __typename\n  }\n  ... on ProcessDiagram {\n    type\n    modelId\n    revisionId\n    __typename\n  }\n  ... on ProcessDiscovery {\n    type\n    graphRenderingMode\n    edgeDimension\n    variantSelection {\n      ...VariantSelection\n      __typename\n    }\n    __typename\n  }\n  ... on ProcessConformance {\n    type\n    selectedView\n    variantSelection {\n      ...VariantSelection\n      __typename\n    }\n    __typename\n  }\n  ... on OlapTable {\n    type\n    columnConfigurations {\n      ...ColumnConfiguration\n      __typename\n    }\n    __typename\n  }\n  ... on SankeyChart {\n    type\n    width\n    dataLabel {\n      ...DataLabel\n      __typename\n    }\n    colorPalette {\n      ...ColorPalette\n      __typename\n    }\n    __typename\n  }\n  ... on Spreadsheet {\n    type\n    __typename\n  }\n  ... on Table {\n    type\n    grouped\n    columnConfigurations {\n      ...ColumnConfiguration\n      __typename\n    }\n    __typename\n  }\n  ... on Text {\n    type\n    __typename\n  }\n  ... on Throughput {\n    type\n    __typename\n  }\n  ... on TimeSeries {\n    type\n    thresholds {\n      ...Threshold\n      __typename\n    }\n    unit {\n      ...Unit\n      __typename\n    }\n    dataLabel {\n      ...DataLabel\n      __typename\n    }\n    colorPalette {\n      ...ColorPalette\n      __typename\n    }\n    __typename\n  }\n  ... on TreeMap {\n    type\n    dataLabel {\n      ...DataLabel\n      __typename\n    }\n    colorPalette {\n      ...ColorPalette\n      __typename\n    }\n    __typename\n  }\n  ... on Value {\n    type\n    thresholds {\n      ...Threshold\n      __typename\n    }\n    unit {\n      ...Unit\n      __typename\n    }\n    rounding {\n      ...Rounding\n      __typename\n    }\n    __typename\n  }\n  ... on ScatterPlot {\n    type\n    hasRegressionLine\n    dataLabel {\n      ...DataLabel\n      __typename\n    }\n    colorPalette {\n      ...ColorPalette\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment Threshold on Threshold {\n  type\n  visible\n  baseColor\n  goal\n  values {\n    label\n    colorAbove\n    value\n    __typename\n  }\n  __typename\n}\n\nfragment Unit on WidgetUnit {\n  ... on SuffixUnit {\n    type\n    suffix\n    __typename\n  }\n  ... on CurrencyUnit {\n    type\n    currencyCode\n    __typename\n  }\n  ... on DurationUnit {\n    type\n    __typename\n  }\n  __typename\n}\n\nfragment Rounding on NumberRoundingSettings {\n  mode\n  numberOfDecimals\n  __typename\n}\n\nfragment ColumnConfiguration on ColumnConfiguration {\n  columnName\n  columnAlias\n  columnPosition\n  settings {\n    thresholds {\n      ...Threshold\n      __typename\n    }\n    dateTimeFormat {\n      ... on SignalWidgetDateFormattingDateAndTime {\n        year\n        month\n        day\n        hour\n        minute\n        __typename\n      }\n      ... on SignalWidgetDateFormattingDate {\n        year\n        month\n        day\n        __typename\n      }\n      ... on SignalWidgetDateFormattingTime {\n        hour\n        minute\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment VariantSelection on VariantSelection {\n  dataSource\n  aggregationDimension\n  order\n  selectedVariants\n  sortBy\n  aggregationDimensionParameter {\n    ... on ProcessVariableParameter {\n      type\n      name\n      __typename\n    }\n    ... on CustomAttributeParameter {\n      type\n      customAttributeId\n      __typename\n    }\n    ... on MetricParameter {\n      type\n      metricId\n      __typename\n    }\n    ... on SemanticTypeParameter {\n      type\n      semanticType\n      __typename\n    }\n    __typename\n  }\n  limit\n  offset\n  __typename\n}\n\nfragment DataLabel on DataLabel {\n  show\n  rotate\n  fontSize\n  fontWeight\n  fontStyle\n  position\n  __typename\n}\n\nfragment ColorPalette on ColorPalette {\n  id\n  reversed\n  __typename\n}\n\nfragment WidgetDataSource on WidgetDataSource {\n  ... on StructuredWidgetDataSource {\n    type\n    projections {\n      ... on ParameterizedProjection {\n        type\n        attribute\n        aggregation\n        parameter {\n          ... on ProcessVariableParameter {\n            type\n            name\n            __typename\n          }\n          ... on CustomAttributeParameter {\n            type\n            customAttributeId\n            __typename\n          }\n          ... on SemanticTypeParameter {\n            type\n            semanticType\n            __typename\n          }\n          __typename\n        }\n        order\n        __typename\n      }\n      ... on MetricProjection {\n        type\n        metric\n        order\n        __typename\n      }\n      __typename\n    }\n    groupBy {\n      ... on AttributeGroupBy {\n        type\n        attribute\n        parameter {\n          ... on ProcessVariableParameter {\n            type\n            name\n            __typename\n          }\n          ... on CustomAttributeParameter {\n            type\n            customAttributeId\n            __typename\n          }\n          ... on SemanticTypeParameter {\n            type\n            semanticType\n            __typename\n          }\n          __typename\n        }\n        order\n        __typename\n      }\n      __typename\n    }\n    timeBucket\n    limit {\n      ... on Limit {\n        value\n        enabled\n        showWarning\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  ... on SignalWidgetDataSource {\n    type\n    query\n    __typename\n  }\n  ... on StaticWidgetDataSource {\n    type\n    data\n    __typename\n  }\n  __typename\n}\n"
}




query_to_api_table={
    "operationName": "CreateWidgetOnInvestigation",
    "variables": {
        "id": "qq-1",
        "widget": {
            "visualization": {
                "type": "OLAP_TABLE"
            },
            "dataSource": {
                "query": "SELECT \"Risk Class\", COUNT (1) AS \"Case Count\"\nFROM \"defaultview-2\"\nWHERE EVENT_NAME MATCHES ('Create Invoice') AND NOT EVENT_NAME MATCHES ('Create Invoice'\n\t\t~> 'Receive Payment') AND NOT EVENT_NAME MATCHES ('Create Invoice'\n\t\t~> 'Cancel Invoice')\nGROUP BY 1\nORDER BY 2 DESC\nLIMIT 500",
                "type": "SIGNAL"
            },
            "name": "New-Table",
            "description": "Create Table widjet"
        }
    },
    "query": "mutation CreateWidgetOnInvestigation($id: ID!, $widget: JSON!) {\n  createWidget(id: $id, widget: $widget) {\n    ...Widget\n    __typename\n  }\n}\n\nfragment Widget on Widget {\n  id\n  name\n  description\n  children\n  filters {\n    ...Filter\n    __typename\n  }\n  visualization {\n    ...Visualization\n    __typename\n  }\n  dataSource {\n    ...WidgetDataSource\n    __typename\n  }\n  __typename\n}\n\nfragment Filter on Filter {\n  ... on ActivityOccurrencesFilter {\n    ...ActivityOccurrencesFilter\n    __typename\n  }\n  ... on CustomSignalFilter {\n    ...CustomSignalFilter\n    __typename\n  }\n  ... on BehaviorFilter {\n    ...BehaviorFilter\n    __typename\n  }\n  ... on CaseCycleTimeFilter {\n    ...CaseCycleTimeFilter\n    __typename\n  }\n  ... on CaseDateFilter {\n    ...CaseDateFilter\n    __typename\n  }\n  ... on EventDateFilter {\n    ...EventDateFilter\n    __typename\n  }\n  ... on CaseDateRollingFilter {\n    ...CaseDateRollingFilter\n    __typename\n  }\n  ... on CaseEventCountFilter {\n    ...CaseEventCountFilter\n    __typename\n  }\n  ... on CaseIdFilter {\n    ...CaseIdFilter\n    __typename\n  }\n  ... on ProcessDiscoveryFilter {\n    ...ProcessDiscoveryFilter\n    __typename\n  }\n  ... on ProcessModelFilter {\n    ...ProcessModelFilter\n    __typename\n  }\n  ... on ProcessVarChoiceFilter {\n    ...ProcessVarChoiceFilter\n    __typename\n  }\n  ... on ProcessVarCurrencyFilter {\n    ...ProcessVarCurrencyFilter\n    __typename\n  }\n  ... on ProcessVarDateTimeFilter {\n    ...ProcessVarDateTimeFilter\n    __typename\n  }\n  ... on ProcessVarDoublePrecisionFilter {\n    ...ProcessVarDoublePrecisionFilter\n    __typename\n  }\n  ... on ProcessVarDurationFilter {\n    ...ProcessVarDurationFilter\n    __typename\n  }\n  __typename\n}\n\nfragment ActivityOccurrencesFilter on ActivityOccurrencesFilter {\n  id\n  type\n  includes\n  excludes\n  enabled\n  level\n  __typename\n}\n\nfragment CustomSignalFilter on CustomSignalFilter {\n  id\n  type\n  name\n  description\n  signalFragment\n  enabled\n  level\n  __typename\n}\n\nfragment BehaviorFilter on BehaviorFilter {\n  id\n  type\n  behaviorType\n  startEndType\n  startEndEvents\n  sequenceType\n  sequenceSource\n  sequenceTarget\n  reworkType\n  reworkOperator\n  reworkFrequency\n  enabled\n  __typename\n}\n\nfragment CaseCycleTimeFilter on CaseCycleTimeFilter {\n  id\n  type\n  maximum {\n    value\n    unit\n    operator\n    __typename\n  }\n  minimum {\n    value\n    unit\n    operator\n    __typename\n  }\n  enabled\n  __typename\n}\n\nfragment CaseDateFilter on CaseDateFilter {\n  type\n  startDate\n  endDate\n  id\n  caseInclusionCriterion\n  enabled\n  __typename\n}\n\nfragment EventDateFilter on EventDateFilter {\n  id\n  type\n  startDate\n  endDate\n  enabled\n  __typename\n}\n\nfragment CaseDateRollingFilter on CaseDateRollingFilter {\n  id\n  type\n  unit\n  amount\n  caseInclusionCriterion\n  enabled\n  __typename\n}\n\nfragment CaseEventCountFilter on CaseEventCountFilter {\n  id\n  type\n  minimum {\n    value\n    operator\n    __typename\n  }\n  maximum {\n    value\n    operator\n    __typename\n  }\n  enabled\n  __typename\n}\n\nfragment CaseIdFilter on CaseIdFilter {\n  id\n  type\n  includes\n  excludes\n  enabled\n  __typename\n}\n\nfragment ProcessDiscoveryFilter on ProcessDiscoveryFilter {\n  id\n  type\n  dataSource\n  variantsAsEventNames\n  aggregationDimension\n  order\n  enabled\n  __typename\n}\n\nfragment ProcessModelFilter on ProcessModelFilter {\n  id\n  type\n  dataSource\n  variantsAsEventNames\n  aggregationDimension\n  order\n  enabled\n  __typename\n}\n\nfragment ProcessVarChoiceFilter on ProcessVarChoiceFilter {\n  id\n  type\n  processVariable\n  includes\n  excludes\n  enabled\n  parameter {\n    ... on ProcessVariableParameter {\n      type\n      name\n      __typename\n    }\n    ... on CustomAttributeParameter {\n      type\n      customAttributeId\n      __typename\n    }\n    __typename\n  }\n  level\n  __typename\n}\n\nfragment ProcessVarCurrencyFilter on ProcessVarCurrencyFilter {\n  id\n  type\n  processVariable\n  minimum {\n    value\n    operator\n    __typename\n  }\n  maximum {\n    value\n    operator\n    __typename\n  }\n  enabled\n  parameter {\n    ... on ProcessVariableParameter {\n      type\n      name\n      __typename\n    }\n    ... on CustomAttributeParameter {\n      type\n      customAttributeId\n      __typename\n    }\n    __typename\n  }\n  level\n  __typename\n}\n\nfragment ProcessVarDateTimeFilter on ProcessVarDateTimeFilter {\n  startDate\n  type\n  endDate\n  id\n  processVariable\n  enabled\n  parameter {\n    ... on ProcessVariableParameter {\n      type\n      name\n      __typename\n    }\n    ... on CustomAttributeParameter {\n      type\n      customAttributeId\n      __typename\n    }\n    __typename\n  }\n  level\n  __typename\n}\n\nfragment ProcessVarDoublePrecisionFilter on ProcessVarDoublePrecisionFilter {\n  id\n  type\n  processVariable\n  minimum {\n    value\n    operator\n    __typename\n  }\n  maximum {\n    value\n    operator\n    __typename\n  }\n  enabled\n  parameter {\n    ... on ProcessVariableParameter {\n      type\n      name\n      __typename\n    }\n    ... on CustomAttributeParameter {\n      type\n      customAttributeId\n      __typename\n    }\n    __typename\n  }\n  level\n  __typename\n}\n\nfragment ProcessVarDurationFilter on ProcessVarDurationFilter {\n  id\n  type\n  processVariable\n  minimum {\n    value\n    unit\n    operator\n    __typename\n  }\n  maximum {\n    value\n    unit\n    operator\n    __typename\n  }\n  enabled\n  parameter {\n    ... on ProcessVariableParameter {\n      type\n      name\n      __typename\n    }\n    ... on CustomAttributeParameter {\n      type\n      customAttributeId\n      __typename\n    }\n    __typename\n  }\n  level\n  __typename\n}\n\nfragment Visualization on Visualization {\n  ... on ActivityList {\n    type\n    __typename\n  }\n  ... on Area {\n    type\n    thresholds {\n      ...Threshold\n      __typename\n    }\n    dataLabel {\n      ...DataLabel\n      __typename\n    }\n    colorPalette {\n      ...ColorPalette\n      __typename\n    }\n    __typename\n  }\n  ... on BarChart {\n    type\n    orientation\n    grouping\n    thresholds {\n      ...Threshold\n      __typename\n    }\n    dataLabel {\n      ...DataLabel\n      __typename\n    }\n    colorPalette {\n      ...ColorPalette\n      __typename\n    }\n    __typename\n  }\n  ... on CasesTable {\n    type\n    columnConfigurations {\n      ...ColumnConfiguration\n      __typename\n    }\n    __typename\n  }\n  ... on Chapter {\n    type\n    __typename\n  }\n  ... on FuzzyModel {\n    type\n    edgeGranularity\n    nodeGranularity\n    annotateBy\n    width\n    __typename\n  }\n  ... on DualAxisChart {\n    type\n    orientation\n    dataLabel {\n      ...DataLabel\n      __typename\n    }\n    colorPalette {\n      ...ColorPalette\n      __typename\n    }\n    __typename\n  }\n  ... on HeatMap {\n    type\n    dataLabel {\n      ...DataLabel\n      __typename\n    }\n    colorPalette {\n      ...ColorPalette\n      __typename\n    }\n    __typename\n  }\n  ... on Histogram {\n    type\n    thresholds {\n      ...Threshold\n      __typename\n    }\n    unit {\n      ...Unit\n      __typename\n    }\n    isAverageShown\n    percentilesShown\n    dataLabel {\n      ...DataLabel\n      __typename\n    }\n    colorPalette {\n      ...ColorPalette\n      __typename\n    }\n    __typename\n  }\n  ... on PieChart {\n    type\n    dataLabel {\n      ...DataLabel\n      __typename\n    }\n    colorPalette {\n      ...ColorPalette\n      __typename\n    }\n    __typename\n  }\n  ... on ProcessDiagram {\n    type\n    modelId\n    revisionId\n    __typename\n  }\n  ... on ProcessDiscovery {\n    type\n    graphRenderingMode\n    edgeDimension\n    variantSelection {\n      ...VariantSelection\n      __typename\n    }\n    __typename\n  }\n  ... on ProcessConformance {\n    type\n    selectedView\n    variantSelection {\n      ...VariantSelection\n      __typename\n    }\n    __typename\n  }\n  ... on OlapTable {\n    type\n    columnConfigurations {\n      ...ColumnConfiguration\n      __typename\n    }\n    __typename\n  }\n  ... on SankeyChart {\n    type\n    width\n    dataLabel {\n      ...DataLabel\n      __typename\n    }\n    colorPalette {\n      ...ColorPalette\n      __typename\n    }\n    __typename\n  }\n  ... on Spreadsheet {\n    type\n    __typename\n  }\n  ... on Table {\n    type\n    grouped\n    columnConfigurations {\n      ...ColumnConfiguration\n      __typename\n    }\n    __typename\n  }\n  ... on Text {\n    type\n    __typename\n  }\n  ... on Throughput {\n    type\n    __typename\n  }\n  ... on TimeSeries {\n    type\n    thresholds {\n      ...Threshold\n      __typename\n    }\n    unit {\n      ...Unit\n      __typename\n    }\n    dataLabel {\n      ...DataLabel\n      __typename\n    }\n    colorPalette {\n      ...ColorPalette\n      __typename\n    }\n    __typename\n  }\n  ... on TreeMap {\n    type\n    dataLabel {\n      ...DataLabel\n      __typename\n    }\n    colorPalette {\n      ...ColorPalette\n      __typename\n    }\n    __typename\n  }\n  ... on Value {\n    type\n    thresholds {\n      ...Threshold\n      __typename\n    }\n    unit {\n      ...Unit\n      __typename\n    }\n    rounding {\n      ...Rounding\n      __typename\n    }\n    __typename\n  }\n  ... on ScatterPlot {\n    type\n    hasRegressionLine\n    dataLabel {\n      ...DataLabel\n      __typename\n    }\n    colorPalette {\n      ...ColorPalette\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment Threshold on Threshold {\n  type\n  visible\n  baseColor\n  goal\n  values {\n    label\n    colorAbove\n    value\n    __typename\n  }\n  __typename\n}\n\nfragment Unit on WidgetUnit {\n  ... on SuffixUnit {\n    type\n    suffix\n    __typename\n  }\n  ... on CurrencyUnit {\n    type\n    currencyCode\n    __typename\n  }\n  ... on DurationUnit {\n    type\n    __typename\n  }\n  __typename\n}\n\nfragment Rounding on NumberRoundingSettings {\n  mode\n  numberOfDecimals\n  __typename\n}\n\nfragment ColumnConfiguration on ColumnConfiguration {\n  columnName\n  columnAlias\n  columnPosition\n  settings {\n    thresholds {\n      ...Threshold\n      __typename\n    }\n    dateTimeFormat {\n      ... on SignalWidgetDateFormattingDateAndTime {\n        year\n        month\n        day\n        hour\n        minute\n        __typename\n      }\n      ... on SignalWidgetDateFormattingDate {\n        year\n        month\n        day\n        __typename\n      }\n      ... on SignalWidgetDateFormattingTime {\n        hour\n        minute\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment VariantSelection on VariantSelection {\n  dataSource\n  aggregationDimension\n  order\n  selectedVariants\n  sortBy\n  aggregationDimensionParameter {\n    ... on ProcessVariableParameter {\n      type\n      name\n      __typename\n    }\n    ... on CustomAttributeParameter {\n      type\n      customAttributeId\n      __typename\n    }\n    ... on MetricParameter {\n      type\n      metricId\n      __typename\n    }\n    ... on SemanticTypeParameter {\n      type\n      semanticType\n      __typename\n    }\n    __typename\n  }\n  limit\n  offset\n  __typename\n}\n\nfragment DataLabel on DataLabel {\n  show\n  rotate\n  fontSize\n  fontWeight\n  fontStyle\n  position\n  __typename\n}\n\nfragment ColorPalette on ColorPalette {\n  id\n  reversed\n  __typename\n}\n\nfragment WidgetDataSource on WidgetDataSource {\n  ... on StructuredWidgetDataSource {\n    type\n    projections {\n      ... on ParameterizedProjection {\n        type\n        attribute\n        aggregation\n        parameter {\n          ... on ProcessVariableParameter {\n            type\n            name\n            __typename\n          }\n          ... on CustomAttributeParameter {\n            type\n            customAttributeId\n            __typename\n          }\n          ... on SemanticTypeParameter {\n            type\n            semanticType\n            __typename\n          }\n          __typename\n        }\n        order\n        __typename\n      }\n      ... on MetricProjection {\n        type\n        metric\n        order\n        __typename\n      }\n      __typename\n    }\n    groupBy {\n      ... on AttributeGroupBy {\n        type\n        attribute\n        parameter {\n          ... on ProcessVariableParameter {\n            type\n            name\n            __typename\n          }\n          ... on CustomAttributeParameter {\n            type\n            customAttributeId\n            __typename\n          }\n          ... on SemanticTypeParameter {\n            type\n            semanticType\n            __typename\n          }\n          __typename\n        }\n        order\n        __typename\n      }\n      __typename\n    }\n    timeBucket\n    limit {\n      ... on Limit {\n        value\n        enabled\n        showWarning\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  ... on SignalWidgetDataSource {\n    type\n    query\n    __typename\n  }\n  ... on StaticWidgetDataSource {\n    type\n    data\n    __typename\n  }\n  __typename\n}\n"
}




create_investigation = {
    "operationName": "createInvestigation",
    "variables": {
        "subjectId": "test00-1",
        "investigation": {
            "name": "llm-based",
            "modelId": None,
            "revisionId": None,
            "viewId": "defaultview-2",
            "metrics": [],
            "access": "PRIVATE"
        }
    },
    "query": "mutation createInvestigation($subjectId: ID!, $investigation: InvestigationInput!) {\n  createInvestigation(subjectId: $subjectId, investigation: $investigation) {\n    ...InvestigationSimple\n    __typename\n  }\n}\n\nfragment InvestigationSimple on Investigation {\n  id\n  name\n  view {\n    name\n    id\n    isDefaultView\n    __typename\n  }\n  owner {\n    id\n    firstName\n    lastName\n    __typename\n  }\n  metrics\n  access\n  __typename\n}\n"
}
list_of_investigations={
    "operationName": "Subject",
    "variables": {     "subjectId": "test00-1" },
    "query": """query Subject($subjectId: ID!) {\n  subject(id: $subjectId) {\n    ...Subject\n  }\n}\n\nfragment Subject on 
    Subject {\n  id\n  name\n  investigationCount\n  
    investigations {\n    id\n    name\n   view {\n      name\n      id\n    }\n  }}\n"""
}

see_process_details= {
    "operationName": "initialSubjectView",
    "variables": {
        "subjectId": "test00-1"
    },
    "query": "query initialSubjectView($subjectId: ID!) {\n  initialSubjectView(subjectId: $subjectId) {\n    columns {\n      name\n      dataType\n      processVariableId\n      isVisible\n      __typename\n    }\n    __typename\n  }\n  getSubjectUsers(subjectId: $subjectId) {\n    ...SubjectUser\n    __typename\n  }\n}\n\nfragment SubjectUser on SubjectUser {\n  id\n  role\n  entity {\n    ...UserOrGroup\n    __typename\n  }\n  views\n  __typename\n}\n\nfragment UserOrGroup on UserOrGroup {\n  ... on User {\n    ...User\n    __typename\n  }\n  ... on UserGroup {\n    ...UserGroup\n    __typename\n  }\n  ... on Everyone {\n    ...Everyone\n    __typename\n  }\n  __typename\n}\n\nfragment Everyone on Everyone {\n  type\n  __typename\n}\n\nfragment User on User {\n  id\n  firstName\n  lastName\n  name\n  email\n  type\n  __typename\n}\n\nfragment UserGroup on UserGroup {\n  id\n  name\n  type\n  __typename\n}\n"
}


query_investigation_details = {
  "operationName": "Investigation",
  "variables": {
    "investigationId": "llm-powered-28022024-180247-1",
    "subjectId": "test00-1"
  },
  "query": "query Investigation($investigationId: ID!, $subjectId: ID!) {\n  investigation(investigationId: $investigationId) {\n    ...Investigation\n    __typename\n  }\n  subject(id: $subjectId) {\n    ...Subject\n    __typename\n  }\n}\n\nfragment Subject on Subject {\n  id\n  name\n  currencyCode\n  businessArea\n  sourceSystem\n  processTypes\n  preprocessingStatus\n  investigationCount\n  investigations {\n    id\n    name\n    __typename\n  }\n  changedAt\n  eventLogUpdatedAt\n  __typename\n}\n\nfragment Investigation on Investigation {\n  ...InvestigationSimple\n  rootWidget\n  modelId\n  revisionId\n  widgets {\n    ...Widget\n    __typename\n  }\n  metrics\n  __typename\n}\n\nfragment Widget on Widget {\n  id\n  name\n  description\n  children\n  filters {\n    ...Filter\n    __typename\n  }\n  visualization {\n    ...Visualization\n    __typename\n  }\n  dataSource {\n    ...WidgetDataSource\n    __typename\n  }\n  __typename\n}\n\nfragment Filter on Filter {\n  ... on ActivityOccurrencesFilter {\n    ...ActivityOccurrencesFilter\n    __typename\n  }\n  ... on CustomSignalFilter {\n    ...CustomSignalFilter\n    __typename\n  }\n  ... on BehaviorFilter {\n    ...BehaviorFilter\n    __typename\n  }\n  ... on CaseCycleTimeFilter {\n    ...CaseCycleTimeFilter\n    __typename\n  }\n  ... on CaseDateFilter {\n    ...CaseDateFilter\n    __typename\n  }\n  ... on EventDateFilter {\n    ...EventDateFilter\n    __typename\n  }\n  ... on CaseDateRollingFilter {\n    ...CaseDateRollingFilter\n    __typename\n  }\n  ... on CaseEventCountFilter {\n    ...CaseEventCountFilter\n    __typename\n  }\n  ... on CaseIdFilter {\n    ...CaseIdFilter\n    __typename\n  }\n  ... on ProcessDiscoveryFilter {\n    ...ProcessDiscoveryFilter\n    __typename\n  }\n  ... on ProcessModelFilter {\n    ...ProcessModelFilter\n    __typename\n  }\n  ... on ProcessVarChoiceFilter {\n    ...ProcessVarChoiceFilter\n    __typename\n  }\n  ... on ProcessVarCurrencyFilter {\n    ...ProcessVarCurrencyFilter\n    __typename\n  }\n  ... on ProcessVarDateTimeFilter {\n    ...ProcessVarDateTimeFilter\n    __typename\n  }\n  ... on ProcessVarDoublePrecisionFilter {\n    ...ProcessVarDoublePrecisionFilter\n    __typename\n  }\n  ... on ProcessVarDurationFilter {\n    ...ProcessVarDurationFilter\n    __typename\n  }\n  __typename\n}\n\nfragment ActivityOccurrencesFilter on ActivityOccurrencesFilter {\n  id\n  type\n  includes\n  excludes\n  enabled\n  level\n  __typename\n}\n\nfragment CustomSignalFilter on CustomSignalFilter {\n  id\n  type\n  name\n  description\n  signalFragment\n  enabled\n  level\n  __typename\n}\n\nfragment BehaviorFilter on BehaviorFilter {\n  id\n  type\n  behaviorType\n  startEndType\n  startEndEvents\n  sequenceType\n  sequenceSource\n  sequenceTarget\n  reworkType\n  reworkOperator\n  reworkFrequency\n  enabled\n  __typename\n}\n\nfragment CaseCycleTimeFilter on CaseCycleTimeFilter {\n  id\n  type\n  maximum {\n    value\n    unit\n    operator\n    __typename\n  }\n  minimum {\n    value\n    unit\n    operator\n    __typename\n  }\n  enabled\n  __typename\n}\n\nfragment CaseDateFilter on CaseDateFilter {\n  type\n  startDate\n  endDate\n  id\n  caseInclusionCriterion\n  enabled\n  __typename\n}\n\nfragment EventDateFilter on EventDateFilter {\n  id\n  type\n  startDate\n  endDate\n  enabled\n  __typename\n}\n\nfragment CaseDateRollingFilter on CaseDateRollingFilter {\n  id\n  type\n  unit\n  amount\n  caseInclusionCriterion\n  enabled\n  __typename\n}\n\nfragment CaseEventCountFilter on CaseEventCountFilter {\n  id\n  type\n  minimum {\n    value\n    operator\n    __typename\n  }\n  maximum {\n    value\n    operator\n    __typename\n  }\n  enabled\n  __typename\n}\n\nfragment CaseIdFilter on CaseIdFilter {\n  id\n  type\n  includes\n  excludes\n  enabled\n  __typename\n}\n\nfragment ProcessDiscoveryFilter on ProcessDiscoveryFilter {\n  id\n  type\n  dataSource\n  variantsAsEventNames\n  aggregationDimension\n  order\n  enabled\n  __typename\n}\n\nfragment ProcessModelFilter on ProcessModelFilter {\n  id\n  type\n  dataSource\n  variantsAsEventNames\n  aggregationDimension\n  order\n  enabled\n  __typename\n}\n\nfragment ProcessVarChoiceFilter on ProcessVarChoiceFilter {\n  id\n  type\n  processVariable\n  includes\n  excludes\n  enabled\n  parameter {\n    ... on ProcessVariableParameter {\n      type\n      name\n      __typename\n    }\n    ... on CustomAttributeParameter {\n      type\n      customAttributeId\n      __typename\n    }\n    __typename\n  }\n  level\n  __typename\n}\n\nfragment ProcessVarCurrencyFilter on ProcessVarCurrencyFilter {\n  id\n  type\n  processVariable\n  minimum {\n    value\n    operator\n    __typename\n  }\n  maximum {\n    value\n    operator\n    __typename\n  }\n  enabled\n  parameter {\n    ... on ProcessVariableParameter {\n      type\n      name\n      __typename\n    }\n    ... on CustomAttributeParameter {\n      type\n      customAttributeId\n      __typename\n    }\n    __typename\n  }\n  level\n  __typename\n}\n\nfragment ProcessVarDateTimeFilter on ProcessVarDateTimeFilter {\n  startDate\n  type\n  endDate\n  id\n  processVariable\n  enabled\n  parameter {\n    ... on ProcessVariableParameter {\n      type\n      name\n      __typename\n    }\n    ... on CustomAttributeParameter {\n      type\n      customAttributeId\n      __typename\n    }\n    __typename\n  }\n  level\n  __typename\n}\n\nfragment ProcessVarDoublePrecisionFilter on ProcessVarDoublePrecisionFilter {\n  id\n  type\n  processVariable\n  minimum {\n    value\n    operator\n    __typename\n  }\n  maximum {\n    value\n    operator\n    __typename\n  }\n  enabled\n  parameter {\n    ... on ProcessVariableParameter {\n      type\n      name\n      __typename\n    }\n    ... on CustomAttributeParameter {\n      type\n      customAttributeId\n      __typename\n    }\n    __typename\n  }\n  level\n  __typename\n}\n\nfragment ProcessVarDurationFilter on ProcessVarDurationFilter {\n  id\n  type\n  processVariable\n  minimum {\n    value\n    unit\n    operator\n    __typename\n  }\n  maximum {\n    value\n    unit\n    operator\n    __typename\n  }\n  enabled\n  parameter {\n    ... on ProcessVariableParameter {\n      type\n      name\n      __typename\n    }\n    ... on CustomAttributeParameter {\n      type\n      customAttributeId\n      __typename\n    }\n    __typename\n  }\n  level\n  __typename\n}\n\nfragment Visualization on Visualization {\n  ... on ActivityList {\n    type\n    __typename\n  }\n  ... on Area {\n    type\n    thresholds {\n      ...Threshold\n      __typename\n    }\n    dataLabel {\n      ...DataLabel\n      __typename\n    }\n    colorPalette {\n      ...ColorPalette\n      __typename\n    }\n    __typename\n  }\n  ... on BarChart {\n    type\n    orientation\n    grouping\n    thresholds {\n      ...Threshold\n      __typename\n    }\n    dataLabel {\n      ...DataLabel\n      __typename\n    }\n    colorPalette {\n      ...ColorPalette\n      __typename\n    }\n    __typename\n  }\n  ... on CasesTable {\n    type\n    columnConfigurations {\n      ...ColumnConfiguration\n      __typename\n    }\n    __typename\n  }\n  ... on Chapter {\n    type\n    __typename\n  }\n  ... on FuzzyModel {\n    type\n    edgeGranularity\n    nodeGranularity\n    annotateBy\n    width\n    __typename\n  }\n  ... on DualAxisChart {\n    type\n    orientation\n    dataLabel {\n      ...DataLabel\n      __typename\n    }\n    colorPalette {\n      ...ColorPalette\n      __typename\n    }\n    __typename\n  }\n  ... on HeatMap {\n    type\n    dataLabel {\n      ...DataLabel\n      __typename\n    }\n    colorPalette {\n      ...ColorPalette\n      __typename\n    }\n    __typename\n  }\n  ... on Histogram {\n    type\n    thresholds {\n      ...Threshold\n      __typename\n    }\n    unit {\n      ...Unit\n      __typename\n    }\n    isAverageShown\n    percentilesShown\n    dataLabel {\n      ...DataLabel\n      __typename\n    }\n    colorPalette {\n      ...ColorPalette\n      __typename\n    }\n    __typename\n  }\n  ... on PieChart {\n    type\n    dataLabel {\n      ...DataLabel\n      __typename\n    }\n    colorPalette {\n      ...ColorPalette\n      __typename\n    }\n    __typename\n  }\n  ... on ProcessDiagram {\n    type\n    modelId\n    revisionId\n    __typename\n  }\n  ... on ProcessDiscovery {\n    type\n    graphRenderingMode\n    edgeDimension\n    variantSelection {\n      ...VariantSelection\n      __typename\n    }\n    __typename\n  }\n  ... on ProcessConformance {\n    type\n    selectedView\n    variantSelection {\n      ...VariantSelection\n      __typename\n    }\n    __typename\n  }\n  ... on OlapTable {\n    type\n    columnConfigurations {\n      ...ColumnConfiguration\n      __typename\n    }\n    __typename\n  }\n  ... on SankeyChart {\n    type\n    width\n    dataLabel {\n      ...DataLabel\n      __typename\n    }\n    colorPalette {\n      ...ColorPalette\n      __typename\n    }\n    __typename\n  }\n  ... on Spreadsheet {\n    type\n    __typename\n  }\n  ... on Table {\n    type\n    grouped\n    columnConfigurations {\n      ...ColumnConfiguration\n      __typename\n    }\n    __typename\n  }\n  ... on Text {\n    type\n    __typename\n  }\n  ... on Throughput {\n    type\n    __typename\n  }\n  ... on TimeSeries {\n    type\n    thresholds {\n      ...Threshold\n      __typename\n    }\n    unit {\n      ...Unit\n      __typename\n    }\n    dataLabel {\n      ...DataLabel\n      __typename\n    }\n    colorPalette {\n      ...ColorPalette\n      __typename\n    }\n    __typename\n  }\n  ... on TreeMap {\n    type\n    dataLabel {\n      ...DataLabel\n      __typename\n    }\n    colorPalette {\n      ...ColorPalette\n      __typename\n    }\n    __typename\n  }\n  ... on Value {\n    type\n    thresholds {\n      ...Threshold\n      __typename\n    }\n    unit {\n      ...Unit\n      __typename\n    }\n    rounding {\n      ...Rounding\n      __typename\n    }\n    __typename\n  }\n  ... on ScatterPlot {\n    type\n    hasRegressionLine\n    dataLabel {\n      ...DataLabel\n      __typename\n    }\n    colorPalette {\n      ...ColorPalette\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment Threshold on Threshold {\n  type\n  visible\n  baseColor\n  goal\n  values {\n    label\n    colorAbove\n    value\n    __typename\n  }\n  __typename\n}\n\nfragment Unit on WidgetUnit {\n  ... on SuffixUnit {\n    type\n    suffix\n    __typename\n  }\n  ... on CurrencyUnit {\n    type\n    currencyCode\n    __typename\n  }\n  ... on DurationUnit {\n    type\n    __typename\n  }\n  __typename\n}\n\nfragment Rounding on NumberRoundingSettings {\n  mode\n  numberOfDecimals\n  __typename\n}\n\nfragment ColumnConfiguration on ColumnConfiguration {\n  columnName\n  columnAlias\n  columnPosition\n  settings {\n    thresholds {\n      ...Threshold\n      __typename\n    }\n    dateTimeFormat {\n      ... on SignalWidgetDateFormattingDateAndTime {\n        year\n        month\n        day\n        hour\n        minute\n        __typename\n      }\n      ... on SignalWidgetDateFormattingDate {\n        year\n        month\n        day\n        __typename\n      }\n      ... on SignalWidgetDateFormattingTime {\n        hour\n        minute\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment VariantSelection on VariantSelection {\n  dataSource\n  aggregationDimension\n  order\n  selectedVariants\n  sortBy\n  aggregationDimensionParameter {\n    ... on ProcessVariableParameter {\n      type\n      name\n      __typename\n    }\n    ... on CustomAttributeParameter {\n      type\n      customAttributeId\n      __typename\n    }\n    ... on MetricParameter {\n      type\n      metricId\n      __typename\n    }\n    ... on SemanticTypeParameter {\n      type\n      semanticType\n      __typename\n    }\n    __typename\n  }\n  limit\n  offset\n  __typename\n}\n\nfragment DataLabel on DataLabel {\n  show\n  rotate\n  fontSize\n  fontWeight\n  fontStyle\n  position\n  __typename\n}\n\nfragment ColorPalette on ColorPalette {\n  id\n  reversed\n  __typename\n}\n\nfragment WidgetDataSource on WidgetDataSource {\n  ... on StructuredWidgetDataSource {\n    type\n    projections {\n      ... on ParameterizedProjection {\n        type\n        attribute\n        aggregation\n        parameter {\n          ... on ProcessVariableParameter {\n            type\n            name\n            __typename\n          }\n          ... on CustomAttributeParameter {\n            type\n            customAttributeId\n            __typename\n          }\n          ... on SemanticTypeParameter {\n            type\n            semanticType\n            __typename\n          }\n          __typename\n        }\n        order\n        __typename\n      }\n      ... on MetricProjection {\n        type\n        metric\n        order\n        __typename\n      }\n      __typename\n    }\n    groupBy {\n      ... on AttributeGroupBy {\n        type\n        attribute\n        parameter {\n          ... on ProcessVariableParameter {\n            type\n            name\n            __typename\n          }\n          ... on CustomAttributeParameter {\n            type\n            customAttributeId\n            __typename\n          }\n          ... on SemanticTypeParameter {\n            type\n            semanticType\n            __typename\n          }\n          __typename\n        }\n        order\n        __typename\n      }\n      __typename\n    }\n    timeBucket\n    limit {\n      ... on Limit {\n        value\n        enabled\n        showWarning\n        __typename\n      }\n      __typename\n    }\n    __typename\n  }\n  ... on SignalWidgetDataSource {\n    type\n    query\n    __typename\n  }\n  ... on StaticWidgetDataSource {\n    type\n    data\n    __typename\n  }\n  __typename\n}\n\nfragment InvestigationSimple on Investigation {\n  id\n  name\n  view {\n    name\n    id\n    isDefaultView\n    __typename\n  }\n  owner {\n    id\n    firstName\n    lastName\n    __typename\n  }\n  metrics\n  access\n  __typename\n}\n"
}



get_process_views={
    "operationName": "subjectViews",
    "variables": {
        "subjectId": "demo01-1"
    },
    "query": "query subjectViews($subjectId: ID!) {\n  subjectViews(subjectId: $subjectId) {\n    ...SubjectView\n    __typename\n  }\n}\n\nfragment SubjectView on SubjectView {\n  id\n  name\n  isDefaultView\n  isAccessView\n  columns {\n    ...SubjectViewColumn\n    __typename\n  }\n  users {\n    ...SubjectViewUser\n    __typename\n  }\n  __typename\n}\n\nfragment SubjectViewColumn on SubjectViewColumn {\n  name\n  isVisible\n  dataType\n  processVariableId\n  filter {\n    ... on SubjectViewColumnDateTimeFilter {\n      startDate\n      endDate\n      type\n      processVariableId\n      __typename\n    }\n    ... on SubjectViewColumnChoiceFilter {\n      includes\n      excludes\n      type\n      processVariableId\n      __typename\n    }\n    ... on SubjectViewColumnNumberFilter {\n      min\n      max\n      type\n      processVariableId\n      __typename\n    }\n    __typename\n  }\n  __typename\n}\n\nfragment SubjectViewUser on SubjectViewUser {\n  id\n  role\n  entity {\n    ...UserOrGroup\n    __typename\n  }\n  __typename\n}\n\nfragment UserOrGroup on UserOrGroup {\n  ... on User {\n    ...User\n    __typename\n  }\n  ... on UserGroup {\n    ...UserGroup\n    __typename\n  }\n  ... on Everyone {\n    ...Everyone\n    __typename\n  }\n  __typename\n}\n\nfragment Everyone on Everyone {\n  type\n  __typename\n}\n\nfragment User on User {\n  id\n  firstName\n  lastName\n  name\n  email\n  type\n  __typename\n}\n\nfragment UserGroup on UserGroup {\n  id\n  name\n  type\n  __typename\n}\n"
}


get_workspaces={
    "operationName": "Session",
    "variables": {},
    "query": "fragment SessionUser on User {\n  id\n  mail\n  name\n  isAdmin\n  language\n  isExpired\n  privileges\n  __typename\n}\n\nquery Session {\n  session {\n    id\n    showMultiLanguage\n    isTechnicalWorkflowUser\n    locales\n    tenantLanguage\n    canCreate\n    createPrivileges {\n      editor\n      jm\n      dictionary\n      __typename\n    }\n    tasksUrl\n    isSamlConfigured\n    samlShareUrlPattern\n    sriRegion\n    version\n    isHubNextEnabled\n    user {\n      ...SessionUser\n      __typename\n    }\n    workspaces {\n      id\n      name\n      __typename\n    }\n    activeWorkspace {\n      id\n      name\n      __typename\n    }\n    analyticsAPIKey\n    __typename\n  }\n}\n"
}