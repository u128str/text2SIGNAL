{"metrics":[{"id":"percentage-of-projects-with-c-1","name":"_Percentage of projects with costs after end date","description":"Percentage of projects with costs being posted after the official end date","signalFragment":"(\nCOUNT (case_id) FILTER (\n\tWHERE \"CostDoc_EnterDocAfterProjectClosingCount\" > 0\n\t)\n/\nCOUNT(case_id)\n)\n* 100","variables":[],"aggregationType":"CASE","unit":{"type":"SUFFIX","suffix":"%"},"createdAt":"2022-12-12T15:40:07.671569Z"},{"id":"percentage-of-projects-in-pla-4","name":"_Percentage of projects in planning","description":"Percentage of projects in the stage 'In Planning'","signalFragment":"(\nCOUNT(case_id) FILTER (WHERE Project_StageText = 'In Planning')\n/\nCOUNT(case_id)\n)\n* 100","variables":[],"aggregationType":"CASE","unit":{"type":"SUFFIX","suffix":"%"},"createdAt":"2022-12-12T15:40:07.671569Z"},{"id":"number-of-projects-with-costs-1","name":"_Number of projects with costs after end date","description":"Number of projects with costs being posted after the official end date","signalFragment":"COUNT (case_id) FILTER (\n\tWHERE (\"CostDoc_EnterDocAfterProjectClosingCount\" > 0)\n\t)","variables":[],"aggregationType":"CASE","createdAt":"2022-12-12T15:40:07.671569Z"},{"id":"percentage-of-completed-proje-1","name":"_Percentage of completed projects","description":"Percentage of projects in the stage 'Completed'","signalFragment":"(\nCOUNT(case_id) FILTER (WHERE Project_StageText = 'Completed')\n/\nCOUNT(case_id)\n)\n* 100","variables":[],"aggregationType":"CASE","unit":{"type":"SUFFIX","suffix":"%"},"createdAt":"2022-12-12T15:40:07.671569Z"},{"id":"number-of-projects-with-overd-2","name":"_Number of projects with overdue Accounts Receivable documents","description":"Number of projects that have at least one Accounts Receivable document that is overdue for longer than a certain timeframe","signalFragment":"COUNT(case_id) FILTER (\n\tWHERE (SELECT COUNT(event_name) > 0\n\t\t   WHERE event_name = 'Create Accounts Receivable'\n\t\t\t AND \"ClearingDate\" IS NULL\n\t\t\t AND (NOW()-\"NetDueDate\") > DURATION '30days')\n\t)\n","variables":[],"aggregationType":"CASE","createdAt":"2022-12-12T15:40:07.671569Z"},{"id":"total-invoiced-amount-1","name":"_Total invoiced amount","description":"Total of all invoiced amounts in Accounts Receivables","signalFragment":"SUM(\"AR_InvoicedAmountInGlobalCurrency\")","variables":[],"aggregationType":"CASE","unit":{"type":"CURRENCY","currencyCode":"USD"},"createdAt":"2022-12-12T15:40:07.671569Z"},{"id":"percentage-of-projects-in-exe-4","name":"_Percentage of projects in execution","description":"Percentage of projects in the stage 'In Execution'","signalFragment":"(\nCOUNT(case_id) FILTER (WHERE Project_StageText = 'In Execution')\n/\nCOUNT(case_id)\n)\n* 100","variables":[],"aggregationType":"CASE","unit":{"type":"SUFFIX","suffix":"%"},"createdAt":"2022-12-12T15:40:07.671569Z"},{"id":"percentage-of-projects-create-4","name":"_Percentage of projects created after start date","description":"Percentage of projects that were created after the defined start date","signalFragment":"(\nSUM(\"Project_CreationAfterStartFlag\" )\n/\nCOUNT(case_id)\n)\n* 100","variables":[],"aggregationType":"CASE","unit":{"type":"SUFFIX","suffix":"%"},"createdAt":"2022-12-12T15:40:07.671569Z","modifiedAt":"2023-01-16T16:48:02.906273Z"}],"metricsVariables":[],"processVariables":[{"id":"projectstagetext-3","name":"Project_StageText","displayName":"Project_StageText","dataType":"CHOICE","level":"CASE"}],"investigation":{"name":"01. P2C - General Analysis","rootWidget":{"name":"root chapter","id":"root-chapter-172","visualization":{"type":"CHAPTER"},"filters":[],"children":[{"name":"Project to Cash Process Overview","id":"project-to-cash-process-overv-2","description":"This Investigation aims to help to analyse the Project to Cash Process and identify process execution bottlenecks.","visualization":{"type":"TEXT"},"dataSource":{"type":"STATIC","data":{"entityMap":{},"blocks":[{"depth":0,"data":{},"inlineStyleRanges":[],"text":"This Investigation aims to build an overview of all projects and sub-processes of Project-to-Cash.","type":"header-two","key":"al0ev","entityRanges":[]},{"depth":0,"data":{},"inlineStyleRanges":[],"text":" - Each chapter below focuses on one sub-process","type":"header-two","key":"16sa8","entityRanges":[]},{"depth":0,"data":{},"inlineStyleRanges":[],"text":" - Potential bottlenecks/opportunities are logged as \"insight\" and can be assigned to the responsible people","type":"header-two","key":"fa1t2","entityRanges":[]},{"depth":0,"data":{},"inlineStyleRanges":[],"text":" - Selected bottlenecks/opportunities are further investigated in separate investigations\n(links enclosed at the last chapter \"Findings/Highlights\")","type":"header-two","key":"75pu5","entityRanges":[]},{"depth":0,"data":{},"inlineStyleRanges":[],"text":"*Data scope: Projects created from Jan.2020","type":"unstyled","key":"d76i0","entityRanges":[]}]}},"filters":[],"children":[]},{"name":"Overview","id":"overview-30","visualization":{"type":"CHAPTER"},"filters":[],"children":[{"name":"Number of Projects","id":"number-of-projects-3","description":"Total number of Projects","visualization":{"type":"VALUE","rounding":{"numberOfDecimals":0,"mode":"ROUND_CLOSEST"}},"dataSource":{"type":"STRUCTURED","projections":[{"type":"PARAMETERIZED","attribute":"CASE","aggregation":"COUNT","parameter":{"type":"SEMANTIC_TYPE","semanticType":"CASE"}}]},"filters":[],"children":[]},{"name":"Number of  Open Projects","id":"number-of--open-projects-2","description":"Neither \"completed\" nor \"closed\".","visualization":{"type":"VALUE"},"dataSource":{"type":"SIGNAL","query":"SELECT COUNT(DISTINCT case_id)\nFROM THIS_PROCESS\nWHERE \"Project_Stage\"  NOT IN ('P005', 'P004')\n"},"filters":[],"children":[]},{"name":"Number of Completed Projects","id":"number-of-completed-projects-3","description":"","visualization":{"type":"VALUE"},"dataSource":{"type":"SIGNAL","query":"SELECT COUNT(DISTINCT case_id)\nFROM THIS_PROCESS\nWHERE \"Project_Stage\"  IN ('P004')\n\n--SELECT COUNT(DISTINCT case_id)\n--FROM FLATTEN(THIS_PROCESS)\n--WHERE event_name = ('Close Project')\n--AND end_time < NOW()"},"filters":[],"children":[]},{"name":"Number of Closed Projects","id":"number-of-closed-projects-3","description":"","visualization":{"type":"VALUE"},"dataSource":{"type":"SIGNAL","query":"SELECT COUNT(DISTINCT case_id)\nFROM THIS_PROCESS\nWHERE \"Project_Stage\"  IN ('P005')\n\n--SELECT COUNT(DISTINCT case_id)\n--FROM FLATTEN(THIS_PROCESS)\n--WHERE event_name = ('Close Project')\n--AND end_time < NOW()"},"filters":[],"children":[]},{"name":"AVG Cycle Project Time  (from Opening till Closing)","id":"avg-cycle-project-time--from--2","visualization":{"type":"VALUE","rounding":{"numberOfDecimals":1,"mode":"ROUND_CLOSEST"},"unit":{"type":"DURATION"}},"dataSource":{"type":"SIGNAL","query":"SELECT\nAVG (\"Cycle Time\") FROM\n\n\t(SELECT\n     \n     LAST(end_time) \n     FILTER (WHERE event_name = 'Close Project') \n     OVER ( PARTITION  BY case_id)\n    \n    - FIRST(end_time) \n    FILTER (WHERE event_name = 'Start Project')\n    OVER ( PARTITION  BY case_id)\n    AS \"Cycle Time\"\n    \n    FROM FLATTEN(THIS_PROCESS) \n    \n    )\n    as cte"},"filters":[],"children":[]},{"name":"Invoiced  Amount","id":"invoiced--amount-3","visualization":{"type":"VALUE","rounding":{"numberOfDecimals":2,"mode":"ROUND_CLOSEST"}},"dataSource":{"type":"STRUCTURED","projections":[{"type":"METRIC","metric":"total-invoiced-amount-1"}]},"filters":[],"children":[]},{"name":"Avg. Billing Approval Time","id":"avg-billing-approval-time-2","description":"From BillingDoc creation to AR Creation.","visualization":{"type":"VALUE","unit":{"type":"DURATION"},"thresholds":{"baseColor":"green","type":"REGION","visible":true,"values":[{"colorAbove":"red","value":1.728E8}]}},"dataSource":{"type":"SIGNAL","query":"SELECT AVG(AVG_ClearingTime) FROM (\nSELECT case_id, \nClearingJournalEntry, \nBillingDocument,\nevent_name, \nend_time - FIRST(end_time) FILTER \n(WHERE event_name = 'Create Billing Document') \nOVER (PARTITION BY BillingDocument ORDER BY end_time)\nAS AVG_ClearingTime\nFROM FLATTEN(THIS_PROCESS)\n)\nAS temp\nWHERE event_name = 'Create Accounts Receivable'"},"filters":[],"children":[]},{"name":"Cycle time from Billing Request Creation to AR Creation","id":"cycle-time-from-billing-reque-2","visualization":{"type":"VALUE","unit":{"type":"DURATION"},"thresholds":{"baseColor":"green","type":"REGION","visible":true,"values":[{"colorAbove":"yellow","value":2.4192E9},{"colorAbove":"red","value":4.2336E9}]}},"dataSource":{"type":"SIGNAL","query":"SELECT AVG(AVG_ClearingTime) FROM (\nSELECT case_id, \nClearingJournalEntry, \nBillingDocument,\nevent_name, \nend_time - FIRST(end_time) \nFILTER (WHERE event_name = 'Create Billing Request (DMR)') \nOVER (PARTITION BY BillingDocument ORDER BY end_time)\nAS AVG_ClearingTime\nFROM FLATTEN(THIS_PROCESS)\n)\nAS temp\nWHERE event_name = 'Create Accounts Receivable'"},"filters":[],"children":[]},{"name":"Process Discovery - AS IS Process","id":"process-discovery---as-is-pro-2","visualization":{"type":"FUZZY_MODEL","edgeGranularity":23,"nodeGranularity":32,"width":"FULL"},"dataSource":{"type":"STRUCTURED","projections":[{"type":"PARAMETERIZED","attribute":"OCCURRENCES","aggregation":"SUM","parameter":{"type":"SEMANTIC_TYPE","semanticType":"OCCURRENCES"}}]},"filters":[],"children":[]},{"name":"Number of idle projects","id":"number-of-idle-projects-2","description":"'Closed' are excluded","visualization":{"type":"VALUE","unit":{"type":"SUFFIX","suffix":" projects inactive for 30+ days"}},"dataSource":{"type":"SIGNAL","query":"SELECT \nCOUNT(case_id) FILTER (\n\tWHERE NOW() - (SELECT LAST(end_time)) > DURATION '30days'\n\t\tAND (SELECT FIRST(event_name) FILTER (\n\t\t\tWHERE event_name IN ('Clear Accounts Receivable'))) IS NULL\n   )\nFROM THIS_PROCESS"},"filters":[{"type":"PROCESS_VAR_CHOICE","id":"processvarchoice-165","enabled":true,"processVariable":"projectstagetext-3","parameter":{"type":"PROCESS_VARIABLE","name":"Project_StageText"},"excludes":["Closed"]}],"children":[]},{"name":"Number of Costs Posted after Closing of the Project","id":"number-of-costs-posted-after--3","visualization":{"type":"VALUE"},"dataSource":{"type":"STRUCTURED","projections":[{"type":"METRIC","metric":"number-of-projects-with-costs-1"}]},"filters":[],"children":[]},{"name":"Percentage of Projects where Costs Posted after Closing","id":"percentage-of-projects-where--4","visualization":{"type":"VALUE","rounding":{"numberOfDecimals":2,"mode":"ROUND_CLOSEST"},"unit":{"type":"SUFFIX","suffix":"%"},"thresholds":{"baseColor":"green","type":"REGION","visible":true,"values":[{"colorAbove":"red","value":30.0}]}},"dataSource":{"type":"STRUCTURED","projections":[{"type":"METRIC","metric":"percentage-of-projects-with-c-1"}]},"filters":[],"children":[]},{"name":"Number of Projects Created After Start","id":"number-of-projects-created-af-4","visualization":{"type":"VALUE","rounding":{"numberOfDecimals":2,"mode":"ROUND_CLOSEST"}},"dataSource":{"type":"STRUCTURED","projections":[{"type":"METRIC","metric":"percentage-of-projects-create-4"}]},"filters":[],"children":[]},{"name":"Percentage of Projects Created After Start","id":"percentage-of-projects-create-5","visualization":{"type":"VALUE","rounding":{"numberOfDecimals":2,"mode":"ROUND_CLOSEST"},"unit":{"type":"SUFFIX","suffix":"%"}},"dataSource":{"type":"STRUCTURED","projections":[{"type":"METRIC","metric":"percentage-of-projects-create-4"}]},"filters":[],"children":[]},{"name":"Percentage of Projects in Execution","id":"percentage-of-projects-in-exe-5","visualization":{"type":"VALUE","rounding":{"numberOfDecimals":0,"mode":"ROUND_CLOSEST"}},"dataSource":{"type":"STRUCTURED","projections":[{"type":"METRIC","metric":"percentage-of-projects-in-exe-4"}]},"filters":[],"children":[]},{"name":"Percentage of Projects in Planning","id":"percentage-of-projects-in-pla-5","visualization":{"type":"VALUE","rounding":{"numberOfDecimals":2,"mode":"ROUND_CLOSEST"}},"dataSource":{"type":"STRUCTURED","projections":[{"type":"METRIC","metric":"percentage-of-projects-in-pla-4"}]},"filters":[],"children":[]},{"name":"Percentage of Projects Completed but not Closed","id":"percentage-of-projects-comple-4","visualization":{"type":"VALUE","rounding":{"numberOfDecimals":0,"mode":"ROUND_CLOSEST"}},"dataSource":{"type":"STRUCTURED","projections":[{"type":"METRIC","metric":"percentage-of-completed-proje-1"}]},"filters":[],"children":[]}]},{"name":"Project Setup","id":"project-setup-2","visualization":{"type":"CHAPTER"},"filters":[],"children":[{"name":"Instructions","id":"instructions-3","visualization":{"type":"TEXT"},"dataSource":{"type":"STATIC","data":{"entityMap":{},"blocks":[{"depth":0,"data":{},"inlineStyleRanges":[],"text":"This chapter focuses on the Project Planning process, including  the Creation of Projects, Work Packages, Billing Elements, etc. until the Projects are being executed.","type":"header-two","key":"f90ld","entityRanges":[]},{"depth":0,"data":{},"inlineStyleRanges":[],"text":"Please be aware that Planned Project Start and Close Dates are reliable only if maintained.","type":"header-two","key":"e6j28","entityRanges":[]}]}},"filters":[],"children":[]},{"name":"Number of Projects by Creation Date","id":"number-of-projects-by-creatio-2","visualization":{"type":"BAR_CHART","orientation":"VERTICAL","grouping":"CLUSTERED"},"dataSource":{"type":"SIGNAL","query":"SELECT \n\tDATE_TRUNC('month', \n    (SELECT FIRST(end_time) \n    FILTER (WHERE event_name = 'Create Project'))) AS \"Creation Date\",\n    COuNT(1) AS \"Number of Projects\"\n\tFROM THIS_PROCESS\nORDER BY 1\nFILL TIMESERIES('month')\n"},"filters":[{"type":"CASE_DATE","id":"casedate-34","enabled":true,"startDate":"2018-09-01T00:00:00Z","caseInclusionCriterion":"CASES_STARTED"}],"children":[]},{"name":"Projects by Project Profile","id":"projects-by-project-profile-2","visualization":{"type":"BAR_CHART","orientation":"HORIZONTAL","grouping":"CLUSTERED"},"dataSource":{"type":"SIGNAL","query":"SELECT count(case_id) AS \"# Projects\", \nProject_ProfileCode AS \"Project Profile\"\nFROM THIS_PROCESS\nORDER BY 1 DESC"},"filters":[],"children":[]},{"name":"Projects by Project Type","id":"projects-by-project-type-2","description":"*known issue of the \"Sales Order not Created\"","visualization":{"type":"BAR_CHART","orientation":"HORIZONTAL","grouping":"CLUSTERED"},"dataSource":{"type":"SIGNAL","query":"SELECT count(case_id) AS \"# Projects\", \nWBSE_ProjectType AS \"Project Type\"\nFROM THIS_PROCESS\nORDER BY 1 DESC"},"filters":[],"children":[]},{"name":"Projects by Stage","id":"projects-by-stage-2","visualization":{"type":"BAR_CHART","orientation":"HORIZONTAL","grouping":"CLUSTERED"},"dataSource":{"type":"SIGNAL","query":"SELECT count(case_id) AS \"# Projects\", \nProject_StageText AS \"Stage\"\nFROM THIS_PROCESS\nORDER BY 1 DESC"},"filters":[],"children":[]},{"name":"Avg. Cycle Time per Project (20 longest running)","id":"avg-cycle-time-per-project-20-2","description":"IPxxx for internal Project, CPxxx for Customer project, or projectType to differenciate","visualization":{"type":"BAR_CHART","orientation":"HORIZONTAL","grouping":"STACKED"},"dataSource":{"type":"SIGNAL","query":"SELECT\n    \"Project\",\n    AVG(C) AS \"Avg Cycle Time\"\nFROM (\n\tSELECT \n        case_id,\n        \"Project_Description\"  as \"Project\",\n   \t(SELECT LAST(end_time) FILTER (WHERE event_name = 'Close Project') \n    \t      - FIRST(end_time) FILTER (WHERE event_name = 'Start Project')) AS C\n\tFROM THIS_PROCESS\n) AS sub\nORDER BY 2 DESC\nLIMIT 20\n"},"filters":[],"children":[]},{"name":"Avg. Cycle Time per Case ID (20 shortest running)","id":"avg-cycle-time-per-case-id-20-2","description":"IPxxx for internal Project, CPxxx for Customer project, or projectType to differenciate","visualization":{"type":"BAR_CHART","orientation":"HORIZONTAL","grouping":"STACKED"},"dataSource":{"type":"SIGNAL","query":"SELECT\n    \"Project\",\n    AVG(C) AS \"Avg Cycle Time\"\nFROM (\n\tSELECT \n        case_id,\n        \"Project_Description\"  as \"Project\",\n    \t(SELECT LAST(end_time) FILTER (WHERE event_name = 'Close Project') \n    \t      - FIRST(end_time) FILTER (WHERE event_name = 'Start Project')) \n              AS C\n\tFROM THIS_PROCESS\n) AS sub\nORDER BY 2 ASC\nLIMIT 20\n"},"filters":[],"children":[]},{"name":"Project Cycle Time vs Planned by Project Category","id":"project-cycle-time-vs-planned-2","visualization":{"type":"TABLE","columnConfigurations":[{"columnName":"AVG(Duration)","columnAlias":"AVG Difference","columnPosition":2,"settings":{"thresholds":{"baseColor":"green","type":"REGION","visible":true,"values":[{"colorAbove":"red","value":4.8384E9}]}}},{"columnName":"MIN(Duration)","columnAlias":"MIN Difference","columnPosition":3,"settings":{}}],"grouped":false},"dataSource":{"type":"SIGNAL","query":"SELECT \nWBSE_ProjectType AS \"Project Type\" ,--case_id,\nCOUNT(DISTINCT case_id) AS \"# Projects\",\nAVG (\"Duration\") AS \"AVG Difference\",\nMIN (\"Duration\") AS \"MIN Difference\",\nMAX (\"Duration\") AS \"MAX Difference\"\nFROM\n(\nSELECT\n\n     WBSE_ProjectType ,\n     case_id, \n    \n     (\n     ( LAST(end_time) FILTER \n    (WHERE event_name = 'Close Project')\n     - FIRST (end_time) FILTER \n    (WHERE event_name = 'Start Project'))\n    \n    -    \n    ( LAST(end_time) FILTER \n    (WHERE event_name = 'Project Planned End Date passed')\n      - FIRST (end_time) FILTER \n    (WHERE event_name = 'Start Project'))\n        )\n     AS \"Duration\"\n    \n    FROM FLATTEN(THIS_PROCESS) ) as selection\n    \n   WHERE \"Duration\" IS NOT NULL\n   \n   ORDER BY 2 DESC"},"filters":[],"children":[]},{"name":"Number of Projects Closed in the Future","id":"number-of-projects-closed-in--3","visualization":{"type":"VALUE"},"dataSource":{"type":"SIGNAL","query":"SELECT count(DISTINCT case_id) FROM FLATTEN(THIS_PROCESS)\nWHERE event_name = 'Close Project'\nAND (\"end_time\"- NOW()) >  DURATION '0day'"},"filters":[],"children":[]},{"name":"Number of Projects Closed in the Future AND in Status Closed","id":"number-of-projects-closed-in--4","visualization":{"type":"VALUE","thresholds":{"baseColor":"green","type":"REGION","visible":true,"values":[{"colorAbove":"red","value":5.0}]}},"dataSource":{"type":"SIGNAL","query":"SELECT count(DISTINCT case_id) FROM FLATTEN(THIS_PROCESS)\nWHERE event_name = 'Close Project'\nAND (\"end_time\" - NOW() ) >  DURATION '0day'\nAND Project_StageText IN ('Closed')"},"filters":[],"children":[]},{"name":"Planned Project Closing vs Actual","id":"planned-project-closing-vs-ac-2","visualization":{"type":"DUAL_AXIS_CHART","orientation":"VERTICAL"},"dataSource":{"type":"SIGNAL","query":"SELECT \n   DATE_TRUNC('month', dates) AS \"Start Date\",\n   AVG(\"Actual_Time\"),\n   AVG(\"Planned_Time\")\n      \n    FROM \n    (\n   SELECT \n    case_id,\n    event_name,\n    end_time AS dates,\n    --Calculate Time from Creation till Closing \n    FIRST(end_time) FILTER \n    (WHERE event_name = 'Close Project')\n    OVER (PARTITION BY case_id)\n    - end_time \n    AS \"Actual_Time\",\n    \n     FIRST(end_time) FILTER \n    (WHERE event_name = 'Project Planned End Date passed')\n    OVER (PARTITION BY case_id)\n     - end_time\n     AS \"Planned_Time\"\n    \n\tFROM FLATTEN(THIS_PROCESS)\n    ) as TEMP\n   \n    WHERE event_name = 'Start Project'\n   --AND DATE_TRUNC('year',END_TIME) >= '01/01/2020'\n   \nORDER BY 1 \nFILL TIMESERIES('month')"},"filters":[],"children":[]},{"name":"Project stages by Managers","id":"project-stages-by-managers-2","visualization":{"type":"TREE_MAP"},"dataSource":{"type":"SIGNAL","query":"SELECT count(case_id) AS \"# Projects\", \nProject_StageText AS \"Stage\",\n\"Project_Manager\"  As \"Project Manager\"\nFROM THIS_PROCESS\nORDER BY 1 DESC"},"filters":[],"children":[]}]},{"name":"Project Billing Process","id":"project-billing-process-2","visualization":{"type":"CHAPTER"},"filters":[],"children":[{"name":"Instructions","id":"instructions-4","visualization":{"type":"TEXT"},"dataSource":{"type":"STATIC","data":{"entityMap":{},"blocks":[{"depth":0,"data":{},"inlineStyleRanges":[],"text":"This chapter focuses on the (old) Project Billing Process, covering the following processes:","type":"header-two","key":"899t3","entityRanges":[]},{"depth":0,"data":{},"inlineStyleRanges":[],"text":" (*AFTER the billing proposal has been released)","type":"header-two","key":"a7jka","entityRanges":[]},{"depth":0,"data":{},"inlineStyleRanges":[],"text":" - Billing Request/DMR operation","type":"header-two","key":"4jn8a","entityRanges":[]},{"depth":0,"data":{},"inlineStyleRanges":[],"text":" - Billing Document creation.","type":"header-two","key":"age1f","entityRanges":[]},{"depth":0,"data":{},"inlineStyleRanges":[],"text":"*The billing proposal is an object from the deprecated old project billing solution and therefore could not provide data to Signavio for the process mining.","type":"unstyled","key":"5c7nk","entityRanges":[]}]}},"filters":[],"children":[]},{"name":"Number of Billing Requests created","id":"number-of-billing-requests-cr-4","visualization":{"type":"VALUE","thresholds":{"baseColor":"green","type":"REGION","visible":false,"values":[{"colorAbove":"red","value":10.0}]}},"dataSource":{"type":"SIGNAL","query":"SELECT \n\nCOUNT(DISTINCT \"SalesDocument\") FILTER (\n\tWHERE event_name ='Create Billing Request (DMR)')\n\nFROM FLATTEN(THIS_PROCESS)"},"filters":[],"children":[]},{"name":"Number of Billing Documents created","id":"number-of-billing-documents-c-7","visualization":{"type":"VALUE","thresholds":{"baseColor":"green","type":"REGION","visible":false,"values":[{"colorAbove":"red","value":10.0}]}},"dataSource":{"type":"SIGNAL","query":"SELECT \n\nCOUNT(DISTINCT \"BillingDocument\") FILTER (\n\tWHERE event_name ='Create Billing Document')\n\nFROM FLATTEN(THIS_PROCESS)"},"filters":[],"children":[]},{"name":"Percentage of Billing Requests rejected","id":"percentage-of-billing-request-5","visualization":{"type":"VALUE","rounding":{"numberOfDecimals":2,"mode":"ROUND_CLOSEST"},"unit":{"type":"SUFFIX","suffix":"%"},"thresholds":{"baseColor":"green","type":"REGION","visible":true,"values":[{"colorAbove":"red","value":10.0}]}},"dataSource":{"type":"SIGNAL","query":"SELECT \nCOUNT(DISTINCT \"SalesDocument\") FILTER (\n\tWHERE event_name LIKE 'Reject Billing Request%')\n/\nCOUNT(DISTINCT \"SalesDocument\") FILTER (\n\tWHERE event_name ='Create Billing Request (DMR)')\n* 100\nFROM FLATTEN(THIS_PROCESS)"},"filters":[],"children":[]},{"name":"Number of Billing Requests rejected","id":"number-of-billing-requests-re-4","visualization":{"type":"VALUE","thresholds":{"baseColor":"green","type":"REGION","visible":true,"values":[{"colorAbove":"red","value":10.0}]}},"dataSource":{"type":"SIGNAL","query":"SELECT \nCOUNT(DISTINCT \"SalesDocument\") FILTER (\n\tWHERE event_name LIKE 'Reject Billing Request%')\nFROM FLATTEN(THIS_PROCESS)"},"filters":[],"children":[]},{"name":"Percentage of Billing Documents Cancelled","id":"percentage-of-billing-documen-6","visualization":{"type":"VALUE","rounding":{"numberOfDecimals":2,"mode":"ROUND_CLOSEST"},"unit":{"type":"SUFFIX","suffix":"%"},"thresholds":{"baseColor":"green","type":"REGION","visible":true,"values":[{"colorAbove":"red","value":5.0}]}},"dataSource":{"type":"SIGNAL","query":"SELECT \nCOUNT(DISTINCT \"BillingDocument\") FILTER (\n\tWHERE event_name ='Cancel Billing Document')\n/\nCOUNT(DISTINCT \"BillingDocument\") FILTER (\n\tWHERE event_name ='Create Billing Document')\n* 100\nFROM FLATTEN(THIS_PROCESS)"},"filters":[],"children":[]},{"name":"Number of Billing Documents Cancelled","id":"number-of-billing-documents-c-8","visualization":{"type":"VALUE","rounding":{"numberOfDecimals":0,"mode":"ROUND_CLOSEST"}},"dataSource":{"type":"SIGNAL","query":"SELECT \nCOUNT(DISTINCT \"BillingDocument\") FILTER (\n\tWHERE event_name ='Cancel Billing Document')\n\nFROM FLATTEN(THIS_PROCESS)"},"filters":[],"children":[]},{"name":"Avg. Time from Billing Request (DMR) to Billing Creation","id":"avg-time-from-billing-request-2","description":"Invoice Approval time","visualization":{"type":"VALUE","unit":{"type":"DURATION"},"thresholds":{"baseColor":"green","type":"REGION","visible":true,"values":[{"colorAbove":"red","value":8.64E7}]}},"dataSource":{"type":"SIGNAL","query":"SELECT AVG(AVG_ApprovalTime) FROM (\nSELECT case_id, \nBillingdocument, \nevent_name, \nend_time - FIRST(end_time) \nFILTER (WHERE event_name = 'Create Billing Request (DMR)') \nOVER (PARTITION BY Billingdocument ORDER BY end_time)\nAS AVG_ApprovalTime\nFROM FLATTEN(THIS_PROCESS)\n)\nAS BillingApprovalTimeCalculation\nWHERE event_name = 'Create Billing Document'"},"filters":[],"children":[]},{"name":"Percentage of Billing Documents Cancelled by Project Type","id":"percentage-of-billing-documen-7","visualization":{"type":"BAR_CHART","orientation":"HORIZONTAL","grouping":"STACKED"},"dataSource":{"type":"SIGNAL","query":"SELECT \n\t\n\tCASE\n    WHEN ((\"Percentage of Billing Documents cancelled\") % 1) >= 0.5 \n    THEN (\"Percentage of Billing Documents cancelled\") - \n\t((\"Percentage of Billing Documents cancelled\") % 1) + 1\n    ELSE (\"Percentage of Billing Documents cancelled\") - \n\t((\"Percentage of Billing Documents cancelled\") % 1)\n\tEND AS \"Percentage of Billing Documents cancelled\",\n    \n    \"Project Type\"\n\nFROM\n(SELECT COUNT (DISTINCT \"BillingDocument\") \nFILTER (WHERE EVENT_NAME = 'Cancel Billing Document') /\nCOUNT (DISTINCT \"BillingDocument\") \nFILTER (WHERE EVENT_NAME = 'Create Billing Document') \n* 100 as \"Percentage of Billing Documents cancelled\"\n\n, WBSE_ProjectType AS \"Project Type\"\n\nFROM FLATTEN(THIS_PROCESS) ) as selections\nORDER BY 1 DESC\n"},"filters":[],"children":[]},{"name":"Billing Approval Time by Project Manager (Top 10)","id":"billing-approval-time-by-proj-2","visualization":{"type":"BAR_CHART","orientation":"HORIZONTAL","grouping":"STACKED"},"dataSource":{"type":"SIGNAL","query":"SELECT \n\"Project_Manager\" AS \"Project Manager\" , \nAVG(AVG_ClearingTime) FROM (\nSELECT case_id, \n\"Project_Manager\" ,\nClearingJournalEntry, \nBillingDocument,\nevent_name, \nend_time - FIRST(end_time) FILTER \n(WHERE event_name = 'Create Billing Document') \nOVER (PARTITION BY BillingDocument ORDER BY end_time)\nAS AVG_ClearingTime\nFROM FLATTEN(THIS_PROCESS)\n)\nAS temp\nWHERE event_name = 'Create Accounts Receivable'\nORDER BY 2 DESC\nLIMIT 10"},"filters":[],"children":[]},{"name":"Avg. Billing Document to Invoice Clearing Time","id":"avg-billing-document-to-invoi-5","visualization":{"type":"VALUE","unit":{"type":"DURATION"},"thresholds":{"baseColor":"green","type":"REGION","visible":true,"values":[{"colorAbove":"red","value":3.456E9}]}},"dataSource":{"type":"SIGNAL","query":"SELECT AVG(AVG_ClearingTime) FROM (\nSELECT case_id, \nClearingJournalEntry, \nBillingDocument,\nevent_name, \nend_time - FIRST(end_time) FILTER (WHERE event_name = 'Create Billing Document') OVER (PARTITION BY BillingDocument ORDER BY end_time)\nAS AVG_ClearingTime\nFROM FLATTEN(THIS_PROCESS)\n)\nAS temp\nWHERE event_name = 'Clear Accounts Receivable'"},"filters":[],"children":[]},{"name":"MIN Billing Document to Invoice Clearing Time","id":"min-billing-document-to-invoi-2","visualization":{"type":"VALUE","unit":{"type":"DURATION"},"thresholds":{"baseColor":"green","type":"REGION","visible":true,"values":[{"colorAbove":"red","value":3.456E9}]}},"dataSource":{"type":"SIGNAL","query":"SELECT MIN(AVG_ClearingTime) FROM (\nSELECT case_id, \nClearingJournalEntry, \nBillingDocument,\nevent_name, \nend_time - FIRST(end_time) FILTER (WHERE event_name = 'Create Billing Document') OVER (PARTITION BY BillingDocument ORDER BY end_time)\nAS AVG_ClearingTime\nFROM FLATTEN(THIS_PROCESS)\n)\nAS temp\nWHERE event_name = 'Clear Accounts Receivable'"},"filters":[],"children":[]},{"name":"MAX Billing Document to Invoice Clearing Time","id":"max-billing-document-to-invoi-2","visualization":{"type":"VALUE","unit":{"type":"DURATION"},"thresholds":{"baseColor":"green","type":"REGION","visible":true,"values":[{"colorAbove":"red","value":3.456E9}]}},"dataSource":{"type":"SIGNAL","query":"SELECT MAX(AVG_ClearingTime) FROM (\nSELECT case_id, \nClearingJournalEntry, \nBillingDocument,\nevent_name, \nend_time - FIRST(end_time) FILTER (WHERE event_name = 'Create Billing Document') OVER (PARTITION BY BillingDocument ORDER BY end_time)\nAS AVG_ClearingTime\nFROM FLATTEN(THIS_PROCESS)\n)\nAS temp\nWHERE event_name = 'Clear Accounts Receivable'"},"filters":[],"children":[]},{"name":"Avg. Billing Document to Invoice Clearing Time","id":"avg-billing-document-to-invoi-6","description":"X axis is the creation date/time of the clearing Journal Entry","visualization":{"type":"AREA"},"dataSource":{"type":"SIGNAL","query":"SELECT AVG(AVG_ClearingTime) AS \"AVG Clearing Time\", DATE_TRUNC('month', wa) AS \"Clearing Date\" FROM (\n  SELECT \n      case_id, \n      --ClearingJournalEntry, \n      end_time AS wa,\n      BillingDocument,\n      event_name, \n      end_time - FIRST(end_time) FILTER (\n          WHERE event_name = 'Create Billing Document') \n          OVER (PARTITION BY BillingDocument ORDER BY end_time)\n      AS AVG_ClearingTime\n  FROM FLATTEN(THIS_PROCESS)\n  )\nAS temp\nWHERE event_name = 'Clear Accounts Receivable'\nORDER BY 2 ASC"},"filters":[],"children":[]},{"name":"Avg. Billing Document to Invoice Clearing Time VS Number of Billing Documents","id":"avg-billing-document-to-invoi-7","visualization":{"type":"DUAL_AXIS_CHART","orientation":"VERTICAL"},"dataSource":{"type":"SIGNAL","query":"SELECT  \n\tDATE_TRUNC('month', wa)  AS \"Clearing Date\" ,\n    COUNT(DISTINCT BillingDocument) AS \"#Billing Docs\", \n    AVG(AVG_ClearingTime) AS \"AVG Clearing Time\"\n    \n    FROM (\n  SELECT \n      case_id, \n      --ClearingJournalEntry, \n      end_time AS wa,\n      BillingDocument,\n      event_name, \n      end_time - FIRST(end_time) FILTER (\n          WHERE event_name = 'Create Billing Document') \n          OVER (PARTITION BY BillingDocument ORDER BY end_time)\n      AS AVG_ClearingTime\n  FROM FLATTEN(THIS_PROCESS)\n  )\nAS temp\nWHERE event_name = 'Clear Accounts Receivable'\nORDER BY 2 ASC"},"filters":[],"children":[]},{"name":"Avg. Billing Document to Invoice Clearing Time having BR Rejections","id":"avg-billing-document-to-invoi-8","visualization":{"type":"DUAL_AXIS_CHART","orientation":"VERTICAL"},"dataSource":{"type":"SIGNAL","query":"SELECT  \n\tDATE_TRUNC('month', wa)  AS \"Clearing Date\" ,\n    COUNT(DISTINCT BillingDocument) AS \"#Billing Docs\", \n    AVG(AVG_ClearingTime) AS \"AVG Clearing Time\"\n    \n    FROM (\n  SELECT \n      case_id, \n      --ClearingJournalEntry, \n      end_time AS wa,\n      BillingDocument,\n      event_name, \n      end_time - FIRST(end_time) FILTER (\n          WHERE event_name = 'Create Billing Document') \n          OVER (PARTITION BY BillingDocument ORDER BY end_time)\n      AS AVG_ClearingTime,\n      \n      CASE WHEN event_name LIKE 'Reject Billing Request%' THEN 1 ELSE 0 END as Flag \n  FROM FLATTEN(THIS_PROCESS)\n\n  )\nAS temp\nWHERE event_name = 'Clear Accounts Receivable'\n\nORDER BY 2 ASC"},"filters":[],"children":[]},{"name":"Percentage of Billing Documents Rejected by Project Type","id":"percentage-of-billing-documen-8","visualization":{"type":"BAR_CHART","orientation":"HORIZONTAL","grouping":"STACKED","thresholds":{"baseColor":"green","type":"REGION","visible":true,"values":[{"colorAbove":"red","value":10.0}]}},"dataSource":{"type":"SIGNAL","query":"SELECT --\"Percentage of Billing Documents rejected\" ,\n\tCASE\n    WHEN ((\"Percentage of Billing Documents rejected\") % 1) >= 0.5 \n    THEN (\"Percentage of Billing Documents rejected\") - \n\t((\"Percentage of Billing Documents rejected\") % 1) + 1\n    ELSE (\"Percentage of Billing Documents rejected\") - \n\t((\"Percentage of Billing Documents rejected\") % 1)\n\tEND AS \"Percentage of Billing Documents rejected\",\n\t\n    \"Project Type\"\n\nFROM\n(SELECT COUNT (DISTINCT \"BillingDocument\") \nFILTER (WHERE EVENT_NAME LIKE 'Reject Billing Request%') /\nCOUNT (DISTINCT \"BillingDocument\") \nFILTER (WHERE EVENT_NAME = 'Create Billing Document') \n* 100 as \"Percentage of Billing Documents rejected\"\n, WBSE_ProjectType AS \"Project Type\"\nFROM FLATTEN(THIS_PROCESS) ) as selections\nORDER BY 1 DESC\n"},"filters":[],"children":[]},{"name":"Billed (Invoiced) Amount over time","id":"billed-invoiced-amount-over-t-3","visualization":{"type":"BAR_CHART","orientation":"VERTICAL","grouping":"CLUSTERED"},"dataSource":{"type":"SIGNAL","query":"SELECT \n\tDATE_TRUNC('month', \n    (SELECT FIRST(end_time) \n    FILTER (WHERE event_name = 'Create Accounts Receivable' ))) AS \"AR Creation Date\",\n    SUM(\"AR_InvoicedAmountInCompanyCodeCurrency\") AS \"Total Amount\"\n\tFROM THIS_PROCESS\nORDER BY 1\nFILL TIMESERIES('month')\n"},"filters":[],"children":[]},{"name":"Rejection Reasons","id":"rejection-reasons-2","visualization":{"type":"BAR_CHART","orientation":"HORIZONTAL","grouping":"STACKED"},"dataSource":{"type":"SIGNAL","query":"SELECT \nEVENT_NAME AS \"Rejection Reason\",\n\nCOUNT (DISTINCT \"BillingDocument\") as \"# of Billing Documents\"\n\nFROM FLATTEN(THIS_PROCESS) \nWHERE EVENT_NAME LIKE 'Reject Billing Request%'\nORDER BY 2 desc"},"filters":[],"children":[]}]},{"name":"Accounts Receivables","id":"accounts-receivables-3","visualization":{"type":"CHAPTER"},"filters":[],"children":[{"name":"Total Number of Receivables","id":"total-number-of-receivables-3","visualization":{"type":"VALUE"},"dataSource":{"type":"SIGNAL","query":"SELECT count(DISTINCT \"ARUniqueKey\"  ) FROM FLATTEN(THIS_PROCESS)"},"filters":[],"children":[]},{"name":"Total Number of Open Receivables","id":"total-number-of-open-receivab-3","visualization":{"type":"VALUE"},"dataSource":{"type":"SIGNAL","query":"SELECT count(DISTINCT \"ARUniqueKey\"  ) FROM FLATTEN(THIS_PROCESS)\nWHERE\nevent_name = 'Create Accounts Receivable'\nAND ClearingDate  IS NULL"},"filters":[],"children":[]},{"name":"Invoice Open Amount","id":"invoice-open-amount-3","visualization":{"type":"VALUE","rounding":{"numberOfDecimals":2,"mode":"ROUND_CLOSEST"},"unit":{"type":"CURRENCY","currencyCode":"USD"}},"dataSource":{"type":"SIGNAL","query":"SELECT SUM(\"AR_InvoicedAmountInCompanyCodeCurrency\" ) \n+ SUM(\"AR_ClearedAmountInCompanyCodeCurrency\" )\nFROM THIS_PROCESS\n"},"filters":[],"children":[]},{"name":"Total Number of Cleared Receivables","id":"total-number-of-cleared-recei-3","visualization":{"type":"VALUE"},"dataSource":{"type":"SIGNAL","query":"SELECT count(DISTINCT \"ARUniqueKey\"  ) FROM FLATTEN(THIS_PROCESS)\nWHERE event_name = 'Clear Accounts Receivable'"},"filters":[],"children":[]},{"name":"Open Overdue Amount (15+ Days)","id":"open-overdue-amount-15-days-3","description":"+15 days","visualization":{"type":"VALUE","rounding":{"numberOfDecimals":2,"mode":"ROUND_CLOSEST"},"unit":{"type":"CURRENCY","currencyCode":"USD"}},"dataSource":{"type":"SIGNAL","query":"SELECT SUM(\"AmountInCompanyCodeCurrency\"  ) \nFROM FLATTEN(THIS_PROCESS)\nWHERE EVENT_NAME = 'Create Accounts Receivable' \nAND ClearingJournalEntry IS NULL\nAND (NOW()-NetDueDate)> DURATION '15day'"},"filters":[],"children":[]},{"name":"Overdue Open Receivables  (15+ Days)","id":"overdue-open-receivables--15--3","visualization":{"type":"VALUE"},"dataSource":{"type":"SIGNAL","query":"SELECT COUNT(DISTINCT ARUniqueKey) FILTER(\n\tWHERE\n    \tevent_name = 'Create Accounts Receivable'\n        AND ClearingDate IS NULL\n\t\tAND (NOW()-NetDueDate)> DURATION '15day'\n)\nFROM FLATTEN (THIS_PROCESS)"},"filters":[],"children":[]},{"name":"Outstanding Receivables for 30 days and more","id":"outstanding-receivables-for-3-4","visualization":{"type":"VALUE"},"dataSource":{"type":"SIGNAL","query":"SELECT COUNT(DISTINCT ARUniqueKey) FILTER(\n\tWHERE\n    \tevent_name = 'Create Accounts Receivable'\n        AND ClearingDate IS NULL\n\t\tAND (NOW()-DocumentDate)> DURATION '30day'\n)\nFROM FLATTEN (THIS_PROCESS)"},"filters":[],"children":[]},{"name":"Average Net Payment Terms","id":"average-net-payment-terms-7","description":"AVG cycle Time from Document Date till Net Due Date","visualization":{"type":"VALUE"},"dataSource":{"type":"SIGNAL","query":"SELECT AVG (\"NetDueDate\" - \"DocumentDate\" ) \nFILTER (WHERE EVENT_NAME = 'Create Accounts Receivable' ) \nAs \"AVG Net Payment Terms\"\nFROM FLATTEN(THIS_PROCESS)\nWHERE  \"NetDueDate\" IS NOT NULL"},"filters":[],"children":[]},{"name":"Average Clearing Time","id":"average-clearing-time-4","visualization":{"type":"VALUE"},"dataSource":{"type":"SIGNAL","query":"SELECT \nAVG (\"ClearingDate\" - \"DocumentDate\" ) \nFILTER (WHERE EVENT_NAME = 'Clear Accounts Receivable' ) \nAs \"AVG Clearing Time\"\nFROM FLATTEN(THIS_PROCESS)\nWHERE \"ClearingDate\" IS NOT NULL AND \"NetDueDate\" IS NOT NULL"},"filters":[],"children":[]},{"name":"Paid Late Ratio","id":"paid-late-ratio-2","visualization":{"type":"VALUE","rounding":{"numberOfDecimals":2,"mode":"ROUND_CLOSEST"},"unit":{"type":"SUFFIX","suffix":"%"}},"dataSource":{"type":"SIGNAL","query":"SELECT (\nCOUNT (DISTINCT ARUniqueKey) \nFILTER (WHERE EVENT_NAME = 'Clear Accounts Receivable' \nAND (ClearingDate   - NetDueDate)  > DURATION '1day')  \n/ COUNT (DISTINCT ARUniqueKey) \nFILTER (WHERE EVENT_NAME = 'Clear Accounts Receivable' ) \n) * 100\nFROM FLATTEN(THIS_PROCESS)"},"filters":[],"children":[]},{"name":"Average Paid Late Days","id":"average-paid-late-days-3","visualization":{"type":"VALUE","rounding":{"numberOfDecimals":2,"mode":"ROUND_CLOSEST"},"unit":{"type":"DURATION"}},"dataSource":{"type":"SIGNAL","query":"SELECT AVG (\"ClearingDate\" - \"NetDueDate\")\nFILTER (WHERE EVENT_NAME = 'Clear Accounts Receivable' )\n AS \"AVG Paid Late Days\"\nFROM FLATTEN(THIS_PROCESS)"},"filters":[],"children":[]},{"name":"Number of Projects with Overdue Receivables (15+ Days)","id":"number-of-projects-with-overd-3","visualization":{"type":"VALUE"},"dataSource":{"type":"STRUCTURED","projections":[{"type":"METRIC","metric":"number-of-projects-with-overd-2"}]},"filters":[],"children":[]},{"name":"Open Overdue Receivables by Project Stage","id":"open-overdue-receivables-by-p-3","description":"> 15 days overdue","visualization":{"type":"BAR_CHART","orientation":"HORIZONTAL","grouping":"STACKED"},"dataSource":{"type":"SIGNAL","query":"SELECT COUNT (DISTINCT ARUniqueKey) \nFILTER (WHERE EVENT_NAME = 'Create Accounts Receivable' \nAND ClearingJournalEntry IS NULL\nAND (NOW()-NetDueDate)> DURATION '15day')\nas \"#Receivables\" , \n \"Project_StageText\" \nFROM FLATTEN(THIS_PROCESS)\nGROUP BY 2\nORDER By 1 DESC"},"filters":[],"children":[]},{"name":"Open Overdue Receivables by Project Manager (Top 10)","id":"open-overdue-receivables-by-p-4","description":"> 15 days overdue","visualization":{"type":"BAR_CHART","orientation":"HORIZONTAL","grouping":"STACKED"},"dataSource":{"type":"SIGNAL","query":"SELECT COUNT (DISTINCT ARUniqueKey) \nFILTER (WHERE EVENT_NAME = 'Create Accounts Receivable' \nAND ClearingJournalEntry IS NULL\nAND (NOW()-NetDueDate)> DURATION '15day')\nas \"#Receivables\" , \n \"Project_Manager\"  as \"Project Manager\"\nFROM FLATTEN(THIS_PROCESS)\nGROUP BY 2\nORDER By 1 DESC\nLIMIT 10"},"filters":[],"children":[]},{"name":"Aging: Overdue Receivables","id":"aging-overdue-receivables-2","visualization":{"type":"BAR_CHART","orientation":"VERTICAL","grouping":"STACKED","thresholds":{"baseColor":"","type":"LINE","visible":false,"values":[{"value":10.0}]}},"dataSource":{"type":"SIGNAL","query":"SELECT \nCASE \n\nWHEN \n\t\t NOW() = NetDueDate THEN '1. Due'\n              \nWHEN \n\t\t(NOW()-NetDueDate)> DURATION '0day'\n        AND  (NOW()-NetDueDate)<= DURATION '7day'\n        THEN '2. 0-7 days'\n        \nWHEN \n\t\t(NOW()-NetDueDate)> DURATION '7day'\n        AND  (NOW()-NetDueDate)<= DURATION '14day'\n        THEN '3. 8-14 days'\nWHEN \n\t\t(NOW()-NetDueDate)> DURATION '14day'\n        AND  (NOW()-NetDueDate)<= DURATION '30day'\n        THEN '4. 15-30 days'\nWHEN \n\t\t(NOW()-NetDueDate)> DURATION '30day'\n        AND  (NOW()-NetDueDate)<= DURATION '60day'\n        THEN '5. 31-60 days'\n        \nWHEN \n\t\t(NOW()-NetDueDate)> DURATION '60day'\n        AND  (NOW()-NetDueDate)<= DURATION '90day'\n        THEN '6. 61-90 days'\n        \nWHEN \n\t\t(NOW()-NetDueDate)> DURATION '90day'\n        THEN '7. >90 days'\n        \nEND AS \"Overdue Category\",  count(\"ARUniqueKey\" ) as \"#Receivables\"\nFROM FLATTEN (THIS_PROCESS)\n\nWHERE NetDueDate is not null \n\t\tAND event_name = 'Create Accounts Receivable'\n        AND ClearingDate IS NULL\n        AND NOW() >= NetDueDate \n ORDER BY 1 ASC\n "},"filters":[],"children":[]},{"name":"Receivables Details (Only Open) ","id":"receivables-details-only-open-2","visualization":{"type":"TABLE","columnConfigurations":[{"columnName":"ClearingDate - NetDueDate","columnAlias":"Paid Late Days","columnPosition":7,"settings":{"thresholds":{"baseColor":"green","type":"REGION","visible":true,"values":[{"colorAbove":"red","value":6.048E8}]}}}],"grouped":false},"dataSource":{"type":"SIGNAL","query":"SELECT  DISTINCT row_number(AccountingDocument) OVER (PARTITION BY case_id) AS \"#\"\n    ,\"case_id\" , \"AR_CustomerName\" AS \"Customer\",\n    \"end_time\"  as \"Creation Time\",\n    AccountingDocument,\n    \"NetDueDate\" - \"DocumentDate\" As \"Net Payment Terms\",\n    \"Overdue Category\",\n    AccountingDocumentItem,\n    LedgerGLLineItem,\n    CompanyCode,\n    FiscalYear,\n    AmountInTransactionCurrency,\n    TransactionCurrency,\n    AmountInCompanyCodeCurrency,\n    CompanyCodeCurrency,\n    NetDueDate,\n    CreationDateTime,\n    DocumentDate,\n    BillingDocument\n   \nFROM FLATTEN(THIS_PROCESS)\nWHERE event_name = 'Create Accounts Receivable'\nAND ClearingJournalEntry IS NULL\nORDER BY  7 DESC"},"filters":[],"children":[]}]},{"name":"Customer Analytics","id":"customer-analytics-2","visualization":{"type":"CHAPTER"},"filters":[],"children":[{"name":"Average Project Lengths by Customer","id":"average-project-lengths-by-cu-2","visualization":{"type":"BAR_CHART","orientation":"VERTICAL","grouping":"STACKED"},"dataSource":{"type":"SIGNAL","query":"SELECT\n    AR_CustomerName AS \"Customer\",\n    AVG(C) AS \"Avg Cycle Time\"\nFROM (\n\tSELECT \n        AR_CustomerName,\n    \t(SELECT LAST(end_time) FILTER (WHERE event_name = 'Close Project') \n    \t      - FIRST(end_time) FILTER (WHERE event_name = 'Start Project')) AS C\n\tFROM THIS_PROCESS\n) AS sub\nORDER BY 2 DESC\nLIMIT 20\n"},"filters":[],"children":[]},{"name":"Cycle Time: Billing Request Creation to Invoice Clearing per Customer (Top 10)","id":"cycle-time-billing-request-cr-2","visualization":{"type":"BAR_CHART","orientation":"HORIZONTAL","grouping":"STACKED"},"dataSource":{"type":"SIGNAL","query":"SELECT AVG(AVG_ClearingTime) as \"Clearing Time\",\nAR_CustomerName as \"Customer\"  FROM (\nSELECT case_id, \nAR_CustomerName,\nClearingJournalEntry, \nBillingDocument,\nevent_name, \nend_time - FIRST(end_time) FILTER (WHERE event_name = 'Create Billing Request (DMR)') OVER (PARTITION BY BillingDocument ORDER BY end_time)\nAS AVG_ClearingTime\nFROM FLATTEN(THIS_PROCESS)\n)\nAS temp\nWHERE event_name = 'Clear Accounts Receivable'\n   AND AR_CustomerName IS NOT NULL\nGROUP BY 2\nORDER BY 1 DESC\nLIMIT 10\n"},"filters":[],"children":[]},{"name":"Top 10 Customers with highest Invoiced Amounts","id":"top-10-customers-with-highest-3","visualization":{"type":"BAR_CHART","orientation":"HORIZONTAL","grouping":"STACKED"},"dataSource":{"type":"SIGNAL","query":"SELECT\n    AR_CustomerName AS \"Customer\",\n    SUM(\"AR_InvoicedAmountInCompanyCodeCurrency\") AS \"Amount\"\nFROM THIS_PROCESS\nWHERE AR_CustomerName IS NOT NULL\nGROUP BY 1\nORDER BY 2 DESC\nLIMIT 10\n"},"filters":[],"children":[]},{"name":"Top 10 Customers with highest Open Receivables Amounts","id":"top-10-customers-with-highest-4","description":"AmountInCompanyCodeCurrency","visualization":{"type":"BAR_CHART","orientation":"HORIZONTAL","grouping":"STACKED","thresholds":{"baseColor":"green","type":"REGION","visible":true,"values":[{"colorAbove":"red","value":500000.0}]}},"dataSource":{"type":"SIGNAL","query":"SELECT\n     \"AR_CustomerName\"  AS \"Customer\",\n    SUM(\"AmountInCompanyCodeCurrency\" ) as \"Amount\"\nFROM FLATTEN(THIS_PROCESS)\nWHERE \"ClearingDate\"  IS NULL\nAND event_name =  'Create Accounts Receivable' \nGROUP BY 1\nORDER BY 2 DESC\nLIMIT 10\n"},"filters":[],"children":[]},{"name":"Overdue Receivables (15+ days overdue) by Value - Top 10 Customer ","id":"overdue-receivables-15-days-o-3","visualization":{"type":"BAR_CHART","orientation":"HORIZONTAL","grouping":"CLUSTERED","thresholds":{"baseColor":"green","type":"REGION","visible":true,"values":[{"colorAbove":"red","value":100000.0}]}},"dataSource":{"type":"SIGNAL","query":"SELECT \"Overdue Amount\" , \"Customer\"\nFROM\n(\nSELECT SUM( \"AmountInCompanyCodeCurrency\" ) \nFILTER (WHERE EVENT_NAME = 'Create Accounts Receivable' \nAND ClearingDate IS NULL AND (NOW() - NetDueDate) > DURATION '15day') \n--OVER ( PARTITION BY \"AR_Customer\")\nAS \"Overdue Amount\", \n\n\"AR_CustomerName\" as \"Customer\"\nFROM FLATTEN(THIS_PROCESS)\n) as selections\nWHERE  \"Overdue Amount\" IS NOT NULL\nORDER BY 1 DESC\n"},"filters":[],"children":[]},{"name":"Overdue Receivables","id":"overdue-receivables-2","visualization":{"type":"HEAT_MAP"},"dataSource":{"type":"SIGNAL","query":"SELECT \n \"AR_CustomerName\" ,\n\"Overdue Category\", \ncount(\"ARUniqueKey\" ) as \"#Receivables\"\nFROM FLATTEN (THIS_PROCESS)\n\nWHERE NetDueDate is not null \n\t\tAND event_name = 'Create Accounts Receivable'\n        AND ClearingDate IS NULL\n        AND NOW() >= NetDueDate \n \n GROUP BY 1,2\n ORDER BY  3 DESC\nLIMIT 20"},"filters":[],"children":[]},{"name":"Late Payment Rate by Customers","id":"late-payment-rate-by-customer-3","visualization":{"type":"TABLE","columnConfigurations":[{"columnName":"COUNT_DISTINCT(ARUniqueKey) / COUNT_DISTINCT(ARUniqueKey) * 100","columnAlias":"Late Payment Rate %","columnPosition":2,"settings":{"thresholds":{"baseColor":"green","type":"REGION","visible":true,"values":[{"colorAbove":"red","value":50.0}]}}},{"columnName":"COUNT_DISTINCT(ARUniqueKey) / COUNT_DISTINCT(ARUniqueKey) * 100","columnAlias":"Late Payment Rate %","columnPosition":2,"settings":{"thresholds":{"baseColor":"green","type":"REGION","visible":true,"values":[{"colorAbove":"red","value":50.0}]}}},{"columnName":"IF(AVG(ClearingDate - NetDueDate) < DURATION '0', NULL, AVG(ClearingDate - NetDueDate))","columnAlias":"AVG Paid Late Days","columnPosition":7,"settings":{"thresholds":{"baseColor":"green","type":"REGION","visible":true,"values":[{"colorAbove":"red","value":6.048E8}]}}},{"columnName":"COUNT_DISTINCT(ARUniqueKey) / COUNT_DISTINCT(ARUniqueKey) * 100","columnAlias":"Late Payment Rate %","columnPosition":2,"settings":{"thresholds":{"baseColor":"green","type":"REGION","visible":true,"values":[{"colorAbove":"red","value":50.0}]}}},{"columnName":"COUNT_DISTINCT(ARUniqueKey) / COUNT_DISTINCT(ARUniqueKey) * 100","columnAlias":"Late Payment Rate %","columnPosition":2,"settings":{"thresholds":{"baseColor":"green","type":"REGION","visible":true,"values":[{"colorAbove":"red","value":50.0}]}}},{"columnName":"IF(AVG(ClearingDate - NetDueDate) < DURATION '0', NULL, AVG(ClearingDate - NetDueDate))","columnAlias":"AVG Paid Late Days","columnPosition":7,"settings":{"thresholds":{"baseColor":"green","type":"REGION","visible":true,"values":[{"colorAbove":"red","value":6.048E8}]}}},{"columnName":"AVG Paid Late Days","columnAlias":"AVG Paid Late Days","columnPosition":7,"settings":{"thresholds":{"baseColor":"green","type":"REGION","visible":true,"values":[{"colorAbove":"red","value":8.64E7}]}}},{"columnName":"IF(AVG(Late Payment Rate %) % 1 >= 0.5, AVG(Late Payment Rate %) - AVG(Late Payment Rate %) % 1 + 1, AVG(Late Payment Rate %) - AVG(Late Payment Rate %) % 1)","columnAlias":"Late Payment Rate % (rounded)","columnPosition":5,"settings":{"thresholds":{"baseColor":"green","type":"REGION","visible":true,"values":[{"colorAbove":"yellow","value":20.0},{"colorAbove":"red","value":60.0}]}}}],"grouped":false},"dataSource":{"type":"SIGNAL","query":"SELECT\n\"AR_Customer\" AS \"Customer Number\",\n\"Customer\" ,\n\"# of Projects\",\n\"# Cleared Receivables\", \n\"Cleared Amount\",\n--\"Late Payment Rate %\",\nCASE\n    WHEN (avg(\"Late Payment Rate %\") % 1) >= 0.5 \n    THEN avg(\"Late Payment Rate %\") - \n(avg(\"Late Payment Rate %\") % 1) + 1\n    ELSE avg(\"Late Payment Rate %\") - \n(avg(\"Late Payment Rate %\") % 1)\nEND AS \"Late Payment Rate % (rounded)\",\n\n\"AVG Net Payment Terms\",\n\"AVG Payment Time\",\n\"AVG Paid Late Days\"\n\nFROM (\nSELECT \n\"AR_CustomerName\" AS \"Customer\",\nCOUNT(DISTINCT \"case_id\" ) AS \"# of Projects\",\nCOUNT (DISTINCT ARUniqueKey) \nFILTER (WHERE EVENT_NAME = 'Clear Accounts Receivable' ) \nAs \"# Cleared Receivables\", \nSUM(\"AmountInCompanyCodeCurrency\" )\nFILTER (WHERE EVENT_NAME = 'Clear Accounts Receivable' )\nAs \"Cleared Amount\",\n(\nCOUNT (DISTINCT ARUniqueKey) \nFILTER (WHERE EVENT_NAME = 'Clear Accounts Receivable' \nAND (ClearingDate   - NetDueDate)  > DURATION '1day')  \n/ COUNT (DISTINCT ARUniqueKey) \nFILTER (WHERE EVENT_NAME = 'Clear Accounts Receivable' ) \n) * 100\nAS \"Late Payment Rate %\",\n\nAVG (\"NetDueDate\" - \"DocumentDate\" ) \nFILTER (WHERE EVENT_NAME = 'Clear Accounts Receivable' ) \nAs \"AVG Net Payment Terms\",\n\nAVG (\"ClearingDate\" - \"DocumentDate\" ) \nFILTER (WHERE EVENT_NAME = 'Clear Accounts Receivable' ) \nAs \"AVG Payment Time\",\n\nCASE \nWHEN AVG (\"ClearingDate\" - \"NetDueDate\") < DURATION '0day' \nTHEN NULL\nELSE\nAVG (\"ClearingDate\" - \"NetDueDate\")\nFILTER (WHERE EVENT_NAME = 'Clear Accounts Receivable' )\nEND AS \"AVG Paid Late Days\",\n\"AR_Customer\" \n\nFROM FLATTEN(THIS_PROCESS)\nWHERE \"ClearingDate\" IS NOT NULL AND \"NetDueDate\" IS NOT NULL\n) as selections\nORDER BY 3 DESC, 5 DESC"},"filters":[],"children":[]},{"name":"Receivables Details (Cleared) - Customer: 1018631, 1020901","id":"receivables-details-cleared---2","visualization":{"type":"TABLE","columnConfigurations":[{"columnName":"ClearingDate - NetDueDate","columnAlias":"Paid Late Days","columnPosition":7,"settings":{"thresholds":{"baseColor":"green","type":"REGION","visible":true,"values":[{"colorAbove":"red","value":6.048E8}]}}}],"grouped":false},"dataSource":{"type":"SIGNAL","query":"SELECT  DISTINCT row_number(AccountingDocument) OVER (PARTITION BY case_id) AS \"#\"\n    ,\"case_id\" , \"AR_Customer\" as \"Customer Number\", \"AR_CustomerName\" AS \"Customer\",\n    \"end_time\"  as \"Creation Time\",\n    AccountingDocument,\n    \nCASE WHEN  (ClearingDate   - NetDueDate)  > DURATION '1day' THEN 'Paid Late'\nELSE 'Paid On Time' END AS \"Late Payment Category\",\n\n\"NetDueDate\" - \"DocumentDate\" As \"Net Payment Terms\",\n\n\"ClearingDate\" - \"DocumentDate\" \nAs \"Payment Time\",\n\n\"ClearingDate\" - \"NetDueDate\" AS \"Paid Late Days\",\n    AccountingDocumentItem,\n    LedgerGLLineItem,\n    CompanyCode,\n    FiscalYear,\n   \n   AmountInTransactionCurrency,\n    TransactionCurrency,\n    AmountInCompanyCodeCurrency,\n    CompanyCodeCurrency,\n    NetDueDate,\n    CreationDateTime,\n    DocumentDate,\n   BillingDocument, \n   ClearingDate,\n    ClearingJournalEntry,\n    ClearingJournalEntryFiscalYear\nFROM FLATTEN(THIS_PROCESS)\nWHERE event_name = 'Clear Accounts Receivable'\nORDER BY 2,1"},"filters":[],"children":[]}]},{"name":"Time Recording","id":"time-recording-2","visualization":{"type":"CHAPTER"},"filters":[],"children":[{"name":"Number of Timesheets","id":"number-of-timesheets-2","visualization":{"type":"VALUE"},"dataSource":{"type":"SIGNAL","query":"SELECT COUNT(DISTINCT ReferenceTimesheetRecord) \nFROM FLATTEN(THIS_PROCESS)\nWHERE event_name = 'Post Timesheet to Accounting'"},"filters":[],"children":[]},{"name":"Number of  Timesheets per Project","id":"number-of--timesheets-per-pro-2","visualization":{"type":"VALUE","rounding":{"numberOfDecimals":2,"mode":"ROUND_CLOSEST"}},"dataSource":{"type":"SIGNAL","query":"SELECT COUNT(DISTINCT ReferenceTimesheetRecord) \n/\nCOUNT(case_id)\nFROM FLATTEN(THIS_PROCESS)"},"filters":[],"children":[]},{"name":"Average Timesheet Approval Time","id":"average-timesheet-approval-ti-3","visualization":{"type":"VALUE","unit":{"type":"DURATION"},"thresholds":{"baseColor":"green","type":"REGION","visible":true,"values":[{"colorAbove":"red","value":3.456E8}]}},"dataSource":{"type":"SIGNAL","query":"SELECT AVG(AVG_ApprovalTime) FROM (\nSELECT case_id, \nTimesheetRecord, \nevent_name, \nend_time - FIRST(end_time) FILTER (WHERE event_name = 'Create Timesheet Record') OVER (PARTITION BY TimesheetRecord ORDER BY end_time)\nAS AVG_ApprovalTime\nFROM FLATTEN(THIS_PROCESS)\n)\nAS ApprovalTimeCalculation\nWHERE event_name IN ('Approve Timesheet Record', 'Auto-Approve Timesheet Record')"},"filters":[],"children":[]},{"name":"Number of not Approved Timesheets","id":"number-of-not-approved-timesh-3","visualization":{"type":"VALUE"},"dataSource":{"type":"SIGNAL","query":"SELECT Count(distinct TimesheetRecord) \nFILTER \n(WHERE event_name = 'Create Timesheet Record')\n-\n Count(distinct TimesheetRecord) \nFILTER \n(WHERE event_name IN ('Approve Timesheet Record', 'Auto-Approve Timesheet Record', 'Cancel Timesheet Record'))\n\nFROM FLATTEN(THIS_PROCESS)\n"},"filters":[],"children":[]},{"name":"Timesheet Approval Time by Company Code","id":"timesheet-approval-time-by-co-2","visualization":{"type":"BAR_CHART","orientation":"HORIZONTAL","grouping":"CLUSTERED"},"dataSource":{"type":"SIGNAL","query":"SELECT\nAVG(AVG_ApprovalTime) \n,\"Project_CompanyCode\"  AS \"Company Code\"\n\nFROM (\nSELECT case_id, \"Project_CompanyCode\" ,\nTimesheetRecord, \nevent_name, \nend_time - FIRST(end_time) FILTER (WHERE event_name = 'Create Timesheet Record') OVER (PARTITION BY TimesheetRecord ORDER BY end_time)\nAS AVG_ApprovalTime\nFROM FLATTEN(THIS_PROCESS)\n)\nAS ApprovalTimeCalculation\nWHERE event_name IN ('Approve Timesheet Record', 'Auto-Approve Timesheet Record')\n\nORDER BY 1 DESC"},"filters":[],"children":[]},{"name":"Timesheet Approval Time by Project Manager","id":"timesheet-approval-time-by-bu-2","visualization":{"type":"BAR_CHART","orientation":"HORIZONTAL","grouping":"CLUSTERED"},"dataSource":{"type":"SIGNAL","query":"SELECT\nAVG(AVG_ApprovalTime) AS \"AVG Approval Time\",\n\"Project_Manager\" AS \"Project Manager\"\n\nFROM (\nSELECT case_id, \"Project_Manager\"  ,\nTimesheetRecord, \nevent_name, \nend_time - FIRST(end_time) FILTER (WHERE event_name = 'Create Timesheet Record') OVER (PARTITION BY TimesheetRecord ORDER BY end_time)\nAS AVG_ApprovalTime\nFROM FLATTEN(THIS_PROCESS)\n)\nAS ApprovalTimeCalculation\nWHERE event_name IN ('Approve Timesheet Record', 'Auto-Approve Timesheet Record')\n\nORDER BY 1 DESC"},"filters":[],"children":[]},{"name":"Timesheet Approval Time by Activity Type","id":"timesheet-approval-time-by-ac-2","description":"A10, A20 project types impact Approval Time?","visualization":{"type":"BAR_CHART","orientation":"VERTICAL","grouping":"CLUSTERED"},"dataSource":{"type":"SIGNAL","query":"SELECT\nAVG(AVG_ApprovalTime) AS \"AVG Approval Time\",\n\"ActivityType\"  AS \"Activity Type\"\n\nFROM (\nSELECT case_id, \"ActivityType\" ,\nTimesheetRecord, \nevent_name, \nend_time - FIRST(end_time) FILTER (WHERE event_name = 'Create Timesheet Record') OVER (PARTITION BY TimesheetRecord ORDER BY end_time)\nAS AVG_ApprovalTime\nFROM FLATTEN(THIS_PROCESS)\n)\nAS ApprovalTimeCalculation\nWHERE event_name IN ('Approve Timesheet Record', 'Auto-Approve Timesheet Record')\n\nORDER BY 1 DESC"},"filters":[],"children":[]},{"name":"Percentage of not Approved Timesheets by Activity Type","id":"percentage-of-not-approved-ti-2","description":"A10, A20 project types impact Approval Time?","visualization":{"type":"BAR_CHART","orientation":"VERTICAL","grouping":"CLUSTERED"},"dataSource":{"type":"SIGNAL","query":"SELECT\n(\nCount(distinct TimesheetRecord) \nFILTER \n(WHERE event_name = 'Create Timesheet Record')\n-\n Count(distinct TimesheetRecord) \nFILTER \n(WHERE event_name IN ('Approve Timesheet Record', 'Auto-Approve Timesheet Record', 'Cancel Timesheet Record'))\n)\n/ Count(distinct TimesheetRecord) * 100 AS \"% of not Approved Timesheets\",\n\n\"ActivityType\"  AS \"Activity Type\"\n\n\nFROM FLATTEN(THIS_PROCESS)\n\nORDER BY 1 DESC"},"filters":[],"children":[]},{"name":"Process Discovery","id":"process-discovery-235","visualization":{"type":"FUZZY_MODEL","edgeGranularity":0,"nodeGranularity":15,"width":"FULL"},"dataSource":{"type":"STRUCTURED","projections":[{"type":"PARAMETERIZED","attribute":"OCCURRENCES","aggregation":"SUM","parameter":{"type":"SEMANTIC_TYPE","semanticType":"OCCURRENCES"}}]},"filters":[{"type":"ACTIVITY_OCCURRENCES","id":"activityoccurrences-170","enabled":true,"includes":["Post Timesheet to Accounting"]}],"children":[]},{"name":"Number of Created Timesheets","id":"number-of-created-timesheets-2","visualization":{"type":"VALUE"},"dataSource":{"type":"SIGNAL","query":"SELECT Count(distinct TimesheetRecord) \nFILTER \n(WHERE event_name = 'Create Timesheet Record')\nFROM FLATTEN(THIS_PROCESS)"},"filters":[],"children":[]},{"name":"Number of Approved Timesheets","id":"number-of-approved-timesheets-2","visualization":{"type":"VALUE"},"dataSource":{"type":"SIGNAL","query":"SELECT Count(distinct TimesheetRecord) \nFILTER \n(WHERE event_name IN ('Approve Timesheet Record', 'Auto-Approve Timesheet Record'))\nFROM FLATTEN(THIS_PROCESS)"},"filters":[],"children":[]},{"name":"Number of Cancelled Timesheets","id":"number-of-cancelled-timesheet-3","visualization":{"type":"VALUE"},"dataSource":{"type":"SIGNAL","query":"SELECT Count(distinct TimesheetRecord) \nFILTER \n(WHERE event_name IN ('Cancel Timesheet Record'))\nFROM FLATTEN(THIS_PROCESS)"},"filters":[],"children":[]}]},{"name":"Findings/Highlights","id":"findingshighlights-2","visualization":{"type":"CHAPTER"},"filters":[],"children":[{"name":"Activity List","id":"activity-list-23","visualization":{"type":"ACTIVITY_LIST"},"filters":[],"children":[]}]}]},"metricsBar":[],"eventToShapeMappings":{"mappings":[]}}}