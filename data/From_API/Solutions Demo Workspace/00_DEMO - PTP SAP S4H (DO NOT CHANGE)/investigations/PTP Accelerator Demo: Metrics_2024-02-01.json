{"metrics":[],"metricsVariables":[],"processVariables":[],"investigation":{"name":"PTP Accelerator Demo: Metrics","rootWidget":{"name":"root chapter","id":"root-chapter-37","visualization":{"type":"CHAPTER"},"filters":[],"children":[{"name":"Process Discovery","id":"process-discovery-47","visualization":{"type":"FUZZY_MODEL","edgeGranularity":62,"nodeGranularity":29,"width":"FULL"},"dataSource":{"type":"STRUCTURED","projections":[{"type":"PARAMETERIZED","attribute":"CYCLE_TIME","aggregation":"SUM","parameter":{"type":"SEMANTIC_TYPE","semanticType":"CYCLE_TIME"}}]},"filters":[],"children":[]},{"name":"30 process-specific metrics","id":"old-metrics-1","visualization":{"type":"CHAPTER"},"filters":[],"children":[{"name":"Average processing time for purchase orders","id":"average-processing-time-for-p-3","visualization":{"type":"VALUE"},"dataSource":{"type":"SIGNAL","query":"SELECT AVG(\n    (SELECT LAST(end_time)\n        WHERE event_name IN ('Receive Order Confirmation'))\n    -(SELECT FIRST(end_time)\n        WHERE event_name IN ('Create PO Item'))\n   )\nFROM THIS_PROCESS"},"filters":[],"children":[]},{"name":"Average confirmation time for purchase requisitions","id":"average-confirmation-time-for-2","visualization":{"type":"VALUE"},"dataSource":{"type":"SIGNAL","query":"SELECT AVG(\n    (SELECT LAST(end_time)\n        WHERE event_name IN ('Create PO Item'))\n    -(SELECT FIRST(end_time)\n        WHERE event_name IN ('Create PR Item'))\n   )\nFROM THIS_PROCESS"},"filters":[],"children":[]},{"name":"Average invoice payment time","id":"average-invoice-payment-time-7","visualization":{"type":"VALUE"},"dataSource":{"type":"SIGNAL","query":"SELECT AVG(\n    (SELECT LAST(end_time)\n        WHERE event_name IN ('Clear Invoice'))\n    -(SELECT FIRST(end_time)\n        WHERE event_name IN ('Record Invoice Receipt','Create FI Invoice'))\n   )\nFROM THIS_PROCESS"},"filters":[],"children":[]},{"name":"Goods return rate","id":"goods-return-rate-1","visualization":{"type":"VALUE","rounding":{"numberOfDecimals":2,"mode":"ROUND_CLOSEST"},"unit":{"type":"SUFFIX","suffix":" %"}},"dataSource":{"type":"SIGNAL","query":"SELECT COUNT(case_id) FILTER (\n    WHERE (SELECT COUNT(event_name)\n            WHERE event_name IN ('Return Delivery via Delivery Note')) > 0\n    )\n/ COUNT(case_id)\n* 100\nFROM THIS_PROCESS"},"filters":[],"children":[]},{"name":"Average purchase order to delivery time","id":"average-purchase-order-to-del-1","visualization":{"type":"VALUE"},"dataSource":{"type":"SIGNAL","query":"SELECT AVG(\n    (SELECT LAST(end_time)\n        WHERE event_name IN ('Create Goods Receipt'))\n    -(SELECT FIRST(end_time)\n        WHERE event_name IN ('Create PO Item'))\n   )\n\nFROM THIS_PROCESS"},"filters":[],"children":[]},{"name":"Late payment rate","id":"late-payment-rate-8","visualization":{"type":"VALUE","rounding":{"numberOfDecimals":2,"mode":"ROUND_CLOSEST"},"unit":{"type":"SUFFIX","suffix":" %"}},"dataSource":{"type":"SIGNAL","query":"SELECT \n  COUNT(case_id) FILTER (\n      WHERE (\"Last FI Invoice Item Due Date\" < \"Last FI Invoice Item Clearing Date\")\n          )\n  / COUNT(case_id) FILTER (\n      WHERE (\"Last FI Invoice Item Clearing Date\" IS NOT NULL)\n          )\n  * 100\nFROM THIS_PROCESS"},"filters":[],"children":[]},{"name":"Missed discounts","id":"missed-discounts-1","visualization":{"type":"VALUE","rounding":{"numberOfDecimals":2,"mode":"ROUND_CLOSEST"},"unit":{"type":"CURRENCY","currencyCode":"USD"}},"dataSource":{"type":"SIGNAL","query":"SELECT SUM(\n    ((\"PO Item Total Invoiced Net Amount in USD\")\n    * (\"Last FI Invoice Item Cash Discount Percentage 1\") * 0.01)\n    -(\"Last FI Invoice Cash Discount in USD\")\n   )\nFROM THIS_PROCESS\n--FROM FLATTEN(THIS_PROCESS)\n--WHERE event_name MATCHES('Delete PO Item')"},"filters":[],"children":[]},{"name":"Process compliance","id":"process-compliance-1","visualization":{"type":"VALUE","rounding":{"numberOfDecimals":2,"mode":"ROUND_CLOSEST"},"unit":{"type":"SUFFIX","suffix":" %"}},"dataSource":{"type":"SIGNAL","query":"SELECT COUNT(case_id) FILTER (\n    WHERE event_name MATCHES('Create PO Item'\n    ~> 'Create Goods Receipt'\n    ~> ('Create FI Invoice' | 'Record Invoice Receipt')\n    ~> 'Clear Invoice' $)\n    )\n/ COUNT(case_id)\n* 100\nFROM THIS_PROCESS"},"filters":[],"children":[]},{"name":"Two-way match rate","id":"two-way-match-rate-1","visualization":{"type":"VALUE","rounding":{"numberOfDecimals":2,"mode":"ROUND_CLOSEST"},"unit":{"type":"SUFFIX","suffix":" %"}},"dataSource":{"type":"SIGNAL","query":"SELECT COUNT(case_id) FILTER (\n    WHERE (\"PO Item Net Order Value\" = \"PO Item Total Invoiced Net Amount Document Curr.\")\n    )\n/ COUNT(case_id)\n* 100\nFROM THIS_PROCESS"},"filters":[],"children":[]},{"name":"Cancellation rate of purchase orders","id":"cancellation-rate-of-purchase-1","visualization":{"type":"VALUE","rounding":{"numberOfDecimals":2,"mode":"ROUND_CLOSEST"},"unit":{"type":"SUFFIX","suffix":" %"}},"dataSource":{"type":"SIGNAL","query":"SELECT COUNT(case_id) FILTER (\n    WHERE (SELECT FIRST(event_name) FILTER (\n            WHERE event_name IN ('Delete PO Item'))) IS NOT NULL\n    )\n/ COUNT(case_id)\n* 100\nFROM THIS_PROCESS"},"filters":[],"children":[]},{"name":"Late deliveries rate","id":"late-deliveries-rate-1","visualization":{"type":"VALUE","rounding":{"numberOfDecimals":2,"mode":"ROUND_CLOSEST"},"unit":{"type":"SUFFIX","suffix":" %"}},"dataSource":{"type":"SIGNAL","query":"SELECT\n  COUNT(case_id) FILTER (\n      WHERE DATE_TRUNC('day', \"Last GR Creation Date\") > \"PO Item Last Requested Delivery Date\"\n      AND \"PO Item Delivery Completed\" = 'Yes'\n      )\n  /\n  COUNT(case_id) FILTER (\n      WHERE \"PO Item Delivery Completed\" = 'Yes'\n      )\n  * 100\nFROM THIS_PROCESS"},"filters":[],"children":[]},{"name":"Payment block rate","id":"payment-block-rate-1","visualization":{"type":"VALUE","rounding":{"numberOfDecimals":2,"mode":"ROUND_CLOSEST"},"unit":{"type":"SUFFIX","suffix":" %"}},"dataSource":{"type":"SIGNAL","query":"SELECT COUNT(case_id) FILTER (\n    WHERE (SELECT FIRST(event_name) FILTER (\n            WHERE event_name IN ('Remove Payment Block'))) IS NOT NULL\n    )\n/ COUNT(case_id)\n* 100\nFROM THIS_PROCESS"},"filters":[],"children":[]},{"name":"Maverick Buying - Price changes after Goods Receipt","id":"maverick-buying---price-chang-3","visualization":{"type":"VALUE"},"dataSource":{"type":"SIGNAL","query":"SELECT (COUNT(case_id) FILTER (\n\tWHERE event_name MATCHES('Create Goods Receipt'\n\t\t\t\t\t\t  ~> 'Update PO Item Net Price')))\nFROM THIS_PROCESS"},"filters":[],"children":[]},{"name":"POs created after Invoice Receipt","id":"pos-created-after-invoice-rec-3","visualization":{"type":"VALUE"},"dataSource":{"type":"SIGNAL","query":"SELECT COUNT(case_id) FILTER\n\t(WHERE (event_name MATCHES(\n    \t('Record Invoice Receipt'|'Create FI Invoice')\n\t\t~> 'Create PO Item')))\nFROM THIS_PROCESS"},"filters":[],"children":[]},{"name":"No-touch-order rate","id":"no-touch-order-rate-v3-1","visualization":{"type":"VALUE","rounding":{"numberOfDecimals":2,"mode":"ROUND_CLOSEST"},"unit":{"type":"SUFFIX","suffix":" %"}},"dataSource":{"type":"SIGNAL","query":"SELECT COUNT(case_id) FILTER (\n\tWHERE NOT (event_name MATCHES (\n    ('Update PR Delivery Date'|'Reactivate PR Item'|'Update PR Material'|'Update PR Quantity'|'Update PR Net Price'|'Update PO Vendor'|'Update PO Currency'|'Update PO Payment Terms'|'Send PO Overdue Note'|'Dun Order Confirmation'|'Send Purchase Order Update'|'Reactivate PO Item'|'Update PO Item Material'|'Update PO Item Quantity'|'Update PO Item Net Price'|'Update PO Item Plant'|'Update PO Confirmed Delivery Date'|'Reverse Goods Receipt'|'Reverse Invoice'|'Set Payment Block'|'Remove Payment Block'|'Change Payment Block'|'Update Invoice Payment Method'|'Update Invoice Payment Terms')\n    ))\n    AND (event_name MATCHES('Create Goods Receipt')))\n/ (COUNT(case_id) FILTER (\n\tWHERE event_name MATCHES('Create Goods Receipt'))\n    )\n* 100\n\nFROM THIS_PROCESS"},"filters":[],"children":[]},{"name":"Invoices waiting for Goods Receipt","id":"invoices-waiting-for-goods-re-3","visualization":{"type":"VALUE"},"dataSource":{"type":"SIGNAL","query":"SELECT COUNT(case_id) FILTER (\n\tWHERE NOT (event_name MATCHES('Create Goods Receipt'))\n\tAND (event_name MATCHES(('Record Invoice Receipt'|'Create FI Invoice')))\n\t)\nFROM THIS_PROCESS"},"filters":[],"children":[]},{"name":"Volume of cancelled orders","id":"volume-of-cancelled-orders-3","visualization":{"type":"VALUE","rounding":{"numberOfDecimals":2,"mode":"ROUND_CLOSEST"},"unit":{"type":"CURRENCY","currencyCode":"USD"}},"dataSource":{"type":"SIGNAL","query":"SELECT SUM(\"PO Item Net Order Value in USD\") FILTER (\n\tWHERE event_name MATCHES('Delete PO Item')\n\t)\nFROM THIS_PROCESS"},"filters":[],"children":[]},{"name":"Cancellation of goods receipts","id":"cancellation-of-goods-receipt-3","visualization":{"type":"VALUE"},"dataSource":{"type":"SIGNAL","query":"SELECT COUNT(case_id) FILTER (\nWHERE (event_name MATCHES('Reverse Goods Receipt'))\nAND (event_name MATCHES('Create Goods Receipt'))\n)\n\nFROM THIS_PROCESS"},"filters":[],"children":[]},{"name":"Perfect order fulfillment rate","id":"perfect-order-fulfillment-rat-1","visualization":{"type":"VALUE","rounding":{"numberOfDecimals":2,"mode":"ROUND_CLOSEST"},"unit":{"type":"SUFFIX","suffix":" %"}},"dataSource":{"type":"SIGNAL","query":"SELECT (COUNT(case_id) FILTER (\n\tWHERE (event_name MATCHES('Create Goods Receipt'))\n\t)\n\t-\n\tCOUNT(case_id) FILTER (\n\tWHERE (event_name MATCHES('Reverse Goods Receipt'))\n\t))\n\t/\n\tCOUNT(case_id) FILTER (\n\tWHERE (event_name MATCHES('Create Goods Receipt'))\n\t)\n\t* 100\nFROM THIS_PROCESS"},"filters":[],"children":[]},{"name":"PO Item changes","id":"po-item-changes-3","visualization":{"type":"VALUE","rounding":{"numberOfDecimals":2,"mode":"ROUND_CLOSEST"},"unit":{"type":"SUFFIX","suffix":" %"}},"dataSource":{"type":"SIGNAL","query":"SELECT COUNT(case_id) FILTER (\n\tWHERE (event_name MATCHES(\n    \t('Update PO Item Material'|'Update PO Item Quantity'|\n         'Update PO Item Net Price'|'Update PO Item Plant'|\n          'Update PO Confirmed Delivery Date'))))\n\t/\n\tCOUNT(case_id) FILTER (\n\tWHERE (event_name MATCHES('Create PO Item'))\n\t)\n* 100\nFROM THIS_PROCESS"},"filters":[],"children":[]},{"name":"Late payments cycle time","id":"late-payments-cycle-time-v3-1","visualization":{"type":"VALUE"},"dataSource":{"type":"SIGNAL","query":"--COUNT(case_id) FILTER (\n--    WHERE (${late_payment_condition})\n--    )\n--/ \n--COUNT(case_id) FILTER (\n--    WHERE (${invoice_clearing_date} IS NOT NULL)\n--    )\n--* 100\n\nSELECT AVG(\n\t(SELECT LAST(end_time) FILTER \n\t\t(WHERE event_name IN ('Clear Invoice')))\n\t-\n\t(SELECT FIRST(end_time) FILTER \n    \t(WHERE event_name IN ('Record Invoice Receipt', 'Create FI Invoice')))\n) FILTER (\n\tWHERE (\"Last FI Invoice Item Due Date\" < \"Last FI Invoice Item Clearing Date\")\n    AND \"Last FI Invoice Item Clearing Date\" IS NOT NULL\n    )\nFROM THIS_PROCESS"},"filters":[],"children":[]},{"name":"Invoice reversal rate","id":"invoice-reversal-rate-1","visualization":{"type":"VALUE","rounding":{"numberOfDecimals":2,"mode":"ROUND_CLOSEST"},"unit":{"type":"SUFFIX","suffix":" %"}},"dataSource":{"type":"SIGNAL","query":"SELECT COUNT(case_id) FILTER (\n    WHERE event_name MATCHES('Reverse Invoice')\n    )\n/ COUNT(case_id) FILTER (\n\tWHERE event_name MATCHES(('Create FI Invoice'|'Record Invoice Receipt'))\n    )\n* 100\nFROM THIS_PROCESS"},"filters":[],"children":[]},{"name":"Overdue payment rate","id":"overdue-payment-rate-2","visualization":{"type":"VALUE","rounding":{"numberOfDecimals":2,"mode":"ROUND_CLOSEST"},"unit":{"type":"SUFFIX","suffix":" %"}},"dataSource":{"type":"SIGNAL","query":"SELECT\n  COUNT(case_id) FILTER (\n      WHERE (\"Last FI Invoice Item Clearing Date\" IS NULL AND \"Last FI Invoice Item Due Date\" < DATE_TRUNC('day', NOW()))\n          )\n  / COUNT(case_id) FILTER (\n      WHERE (\"Last FI Invoice Item Clearing Date\" IS NULL)\n          )\n  * 100\nFROM THIS_PROCESS"},"filters":[],"children":[]},{"name":"Late deliveries cases","id":"late-deliveries-cases-2","visualization":{"type":"VALUE"},"dataSource":{"type":"SIGNAL","query":"SELECT\n  COUNT(case_id) FILTER (\n      WHERE DATE_TRUNC('day', \"Last GR Creation Date\") > \"PO Item Last Requested Delivery Date\"\n      AND \"PO Item Delivery Completed\" = 'Yes'\n      )\nFROM THIS_PROCESS"},"filters":[],"children":[]},{"name":"Late deliveries net value","id":"late-deliveries-net-value-1","visualization":{"type":"VALUE","rounding":{"numberOfDecimals":2,"mode":"ROUND_CLOSEST"},"unit":{"type":"SUFFIX","suffix":" $"}},"dataSource":{"type":"SIGNAL","query":"SELECT\n  SUM(\"PO Item Net Order Value in USD\") FILTER (\n      WHERE DATE_TRUNC('day', \"Last GR Creation Date\") > \"PO Item Last Requested Delivery Date\"\n      AND \"PO Item Delivery Completed\" = 'Yes'\n      )\nFROM THIS_PROCESS"},"filters":[],"children":[]},{"name":"Average delay of late deliveries","id":"average-delay-of-late-deliver-2","visualization":{"type":"VALUE","unit":{"type":"DURATION"}},"dataSource":{"type":"SIGNAL","query":"SELECT\n  AVG(DATE_TRUNC('day', \"Last GR Creation Date\") - \"PO Item Last Requested Delivery Date\") FILTER (\n      WHERE DATE_TRUNC('day', \"Last GR Creation Date\") > \"PO Item Last Requested Delivery Date\"\n      AND \"PO Item Delivery Completed\" = 'Yes'\n      )\nFROM THIS_PROCESS"},"filters":[],"children":[]},{"name":"On-time delivery rate","id":"on-time-delivery-rate-8","visualization":{"type":"VALUE","rounding":{"numberOfDecimals":2,"mode":"ROUND_CLOSEST"},"unit":{"type":"SUFFIX","suffix":" %"}},"dataSource":{"type":"SIGNAL","query":"SELECT\n  (1 - \n      COUNT(case_id) FILTER (\n          WHERE DATE_TRUNC('day', \"Last GR Creation Date\") > \"PO Item Last Requested Delivery Date\"\n          AND \"PO Item Delivery Completed\" = 'Yes'\n          )\n      /\n      COUNT(case_id) FILTER (\n          WHERE \"PO Item Delivery Completed\" = 'Yes'\n          )\n      )\n  * 100\nFROM THIS_PROCESS"},"filters":[],"children":[]},{"name":"Overdue deliveries cases","id":"overdue-deliveries-cases-2","visualization":{"type":"VALUE"},"dataSource":{"type":"SIGNAL","query":"SELECT\n  COUNT(case_id) FILTER (\n      WHERE DATE_TRUNC('day', NOW()) > \"PO Item Last Requested Delivery Date\"\n    \tAND \"PO Item Delivery Completed\" IS NULL\n      ) \nFROM THIS_PROCESS"},"filters":[],"children":[]},{"name":"Overdue deliveries rate","id":"overdue-deliveries-rate-2","visualization":{"type":"VALUE","rounding":{"numberOfDecimals":2,"mode":"ROUND_CLOSEST"},"unit":{"type":"SUFFIX","suffix":" %"}},"dataSource":{"type":"SIGNAL","query":"SELECT\n  COUNT(case_id) FILTER (\n      WHERE DATE_TRUNC('day', NOW()) > \"PO Item Last Requested Delivery Date\"\n    \tAND \"PO Item Delivery Completed\" IS NULL\n      )\n  /\n  COUNT(case_id) FILTER (\n      WHERE (\"PO Item Delivery Completed\" = 'Yes') IS NULL\n      )\n  * 100\nFROM THIS_PROCESS"},"filters":[],"children":[]},{"name":"Overdue deliveries net value","id":"overdue-deliveries-net-value-2","visualization":{"type":"VALUE","rounding":{"numberOfDecimals":2,"mode":"ROUND_CLOSEST"},"unit":{"type":"SUFFIX","suffix":" $"}},"dataSource":{"type":"SIGNAL","query":"SELECT\n  SUM(\"PO Item Net Order Value in USD\") FILTER (\n      WHERE DATE_TRUNC('day', NOW()) > \"PO Item Last Requested Delivery Date\"\n    \tAND \"PO Item Delivery Completed\" IS NULL\n      )\nFROM THIS_PROCESS"},"filters":[],"children":[]}]},{"name":"Demo","id":"productivity-1","visualization":{"type":"CHAPTER"},"filters":[],"children":[]}]},"metricsBar":[],"eventToShapeMappings":{"mappings":[]}}}